"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[400],{400:(Z,x,l)=>{l.r(x),l.d(x,{RootUsuariosModule:()=>n});var t=l(6814),c=l(6985),e=l(9468),p=l(932),v=l(6688);function y(o,a){if(1&o&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e._UZ(3,"img",6),e.qZA(),e.TgZ(4,"div",7)(5,"div",8),e._uU(6),e.qZA(),e.TgZ(7,"div",9),e._uU(8),e.qZA(),e.TgZ(9,"div",10),e._uU(10),e.qZA()()(),e.TgZ(11,"div",11)(12,"button",12),e._uU(13," Editar "),e.qZA(),e.TgZ(14,"button",13),e._uU(15," Eliminar "),e.qZA()()()),2&o){const i=a.$implicit;e.xp6(3),e.Q6J("src",i.avatar_url,e.LSH),e.xp6(3),e.AsE("",i.primer_apellido," ",i.primer_nombre,""),e.xp6(2),e.Oqu(i.nid),e.xp6(2),e.Oqu(i.email)}}let f=(()=>{class o{constructor(){this.users=[]}static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-list"]],inputs:{users:"users"},decls:3,vars:1,consts:[[1,"container","mt-3"],[1,"user-list"],["class","user-item d-flex align-items-center justify-content-between mb-2",4,"ngFor","ngForOf"],[1,"user-item","d-flex","align-items-center","justify-content-between","mb-2"],[1,"d-flex","align-items-center"],[1,"avatar"],["alt","Avatar","width","50","height","50",1,"rounded-circle",3,"src"],[1,"user-info"],[1,"user-name"],[1,"user-document"],[1,"user-email"],[1,"user-actions"],[1,"btn","btn-primary","btn-sm","me-1"],[1,"btn","btn-danger","btn-sm"]],template:function(s,m){1&s&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,y,16,5,"div",2),e.qZA()()),2&s&&(e.xp6(2),e.Q6J("ngForOf",m.users))},dependencies:[t.sg],styles:[".user-list[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;padding:1rem}.user-item[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #eee}.user-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700}.user-info[_ngcontent-%COMP%]   .user-document[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:.8rem;color:#666}"]})}return o})();function _(o,a){1&o&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"app-loading",9),e.TgZ(3,"h4",10),e._uU(4," Cargando... "),e.qZA()()())}const d=function(o){return{active:o}};function g(o,a){if(1&o){const i=e.EpF();e.TgZ(0,"li",17)(1,"a",18),e.NdJ("click",function(){const T=e.CHM(i).$implicit,b=e.oxw(2);return e.KtG(b.onRole(T.id))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&o){const i=a.$implicit,s=a.index;e.xp6(1),e.Q6J("ngClass",e.VKq(6,d,0===s)),e.uIk("id",i.name+"-tab")("data-bs-target","#"+i.name),e.xp6(1),e.Oqu(e.lcZ(3,4,i.name))}}const h=function(o){return["/root/usuarios/add/",o]};function C(o,a){if(1&o&&(e.TgZ(0,"div",19)(1,"div",20)(2,"a",21),e._uU(3," Registrar "),e.qZA()(),e._UZ(4,"app-user-list",22),e.qZA()),2&o){const i=a.$implicit,s=a.index,m=e.oxw(2);e.Q6J("ngClass",e.VKq(5,d,0===s)),e.uIk("id",i.name)("tabindex",s),e.xp6(2),e.Q6J("routerLink",e.VKq(7,h,i.id)),e.xp6(2),e.Q6J("users",m.filter)}}function U(o,a){if(1&o&&(e.TgZ(0,"div",11)(1,"ul",12),e.YNc(2,g,4,8,"li",13),e.qZA(),e.TgZ(3,"div",14)(4,"div",15),e.YNc(5,C,5,9,"div",16),e.qZA()()()),2&o){const i=e.oxw();e.xp6(2),e.Q6J("ngForOf",i.roles),e.xp6(3),e.Q6J("ngForOf",i.roles)}}let N=(()=>{class o{constructor(i,s){this.crudRoleService=i,this.crudService=s,this.data=[],this.filter=[],this.roles=[],this.success=!0,this.loading=!1}ngOnInit(){this.loading=!0,this.crudService.read("/root/usuarios").subscribe({next:i=>{this.data=i,this.loadRoles()},error:i=>{this.loading=!1,console.error("Error al obtener los usuarios:",i)}})}loadRoles(){this.crudRoleService.read("/root/roles").subscribe({next:i=>{this.roles=i,this.loading=!1},error:i=>{this.loading=!1,console.error("Error al obtener los roles:",i)}})}onRole(i){this.filter=[],this.filter=this.data.filter(s=>s.roles.some(m=>m.id===i))}static#t=this.\u0275fac=function(s){return new(s||o)(e.Y36(p.I),e.Y36(p.I))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-root-usuarios"]],decls:8,vars:2,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],["class","container mt-3",4,"ngIf"],["class","d-flex align-items-start",4,"ngIf"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[1,"d-flex","align-items-start"],["id","v-pills-tab","role","tablist",1,"nav","flex-column","nav-pills","border-end","pe-2","me-2"],["class","nav-item",4,"ngFor","ngForOf"],["id","v-pills-tabContent",1,"tab-content","w-100"],[1,"tab-content"],["class","tab-pane","role","tabpanel",3,"ngClass",4,"ngFor","ngForOf"],[1,"nav-item"],["data-bs-toggle","pill",1,"nav-link","cursor",3,"ngClass","click"],["role","tabpanel",1,"tab-pane",3,"ngClass"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"routerLink"],[3,"users"]],template:function(s,m){1&s&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),e._uU(3,"Usuarios"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4),e.YNc(6,_,5,0,"div",5),e.YNc(7,U,6,2,"div",6),e.qZA()()),2&s&&(e.xp6(6),e.Q6J("ngIf",m.loading),e.xp6(1),e.Q6J("ngIf",!m.loading))},dependencies:[t.mk,t.sg,t.O5,c.rH,v.N,f,t.rS]})}return o})();var A=l(5861),q=l(2451),I=l(4036),O=l(4013);const F=[{path:"",component:N},{path:"add/:id",component:(()=>{class o{constructor(i,s,m){this.crudService=i,this.crudTipodocumentoService=s,this.router=m,this.success=!0,this.loading=!1}ngOnInit(){var i=this;return(0,A.Z)(function*(){i.id=i.router.snapshot.params.id,i.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"rol",type:"hidden",value:i.id},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"}],actions:{}};const m=(yield(0,I.z)(i.crudTipodocumentoService.read("/root/tipo_documentos"))).filter(b=>"activo"===b.estado).map(b=>({value:b.id.toString(),displayValue:b.nombre})),T=i.config.columns.find(b=>"tipo_documento"===b.key);T&&(T.options=m)})()}onAgregar(i){i.rol=this.id,this.loading=!0,this.crudService.create(i,"/root/usuarios").subscribe({next:s=>{this.data=new q.n,this.message=s.message,this.success=!0,this.loading=!1},error:s=>{this.message="Error al crear el usuario : "+s,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#t=this.\u0275fac=function(s){return new(s||o)(e.Y36(p.I),e.Y36(p.I),e.Y36(c.gz))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-root-usuarios-add"]],decls:8,vars:4,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/root/usuarios"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","message","success","config","event"]],template:function(s,m){1&s&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Usuarios"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Nuevo"),e.qZA()()(),e.TgZ(7,"app-formulario",5),e.NdJ("event",function(b){return m.onAgregar(b)}),e.qZA()),2&s&&(e.xp6(7),e.Q6J("loading",m.loading)("message",m.message)("success",m.success)("config",m.config))},dependencies:[c.rH,O.o]})}return o})()},{path:"edit/:id",component:(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-root-usuarios-edit"]],decls:2,vars:0,template:function(s,m){1&s&&(e.TgZ(0,"p"),e._uU(1,"root-usuarios-edit works!"),e.qZA())}})}return o})()}];let r=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(F),c.Bz]})}return o})();var u=l(6208);let n=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[t.ez,r,u.m]})}return o})()},4013:(Z,x,l)=>{l.d(x,{o:()=>F});var t=l(9468),c=l(95),e=l(6814),p=l(6688);const v=function(r,u){return{"alert-success":r,"alert-danger":u}};function y(r,u){if(1&r&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&r){const n=t.oxw();t.Q6J("ngClass",t.WLB(2,v,n.success,!n.success)),t.xp6(1),t.hij(" ",n.message,"\n")}}function f(r,u){1&r&&(t.TgZ(0,"div",5),t._UZ(1,"app-loading",6),t.TgZ(2,"h4",7),t._uU(3," Cargando... "),t.qZA()())}function _(r,u){1&r&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function d(r,u){if(1&r&&(t.TgZ(0,"label",20),t.YNc(1,_,2,0,"span",21),t._uU(2),t.qZA()),2&r){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",n.required),t.xp6(1),t.hij(" ",n.displayName," ")}}function g(r,u){if(1&r&&t._UZ(0,"input",22),2&r){const n=t.oxw().$implicit;let o;t.Q6J("name",n.key)("value",n.value)("required",null!==(o=n.required)&&void 0!==o&&o)}}function h(r,u){if(1&r&&t._UZ(0,"input",23),2&r){const n=t.oxw().$implicit;let o;t.s9C("type",n.type),t.Q6J("formControlName",n.key)("required",null!==(o=n.required)&&void 0!==o&&o)}}function C(r,u){if(1&r&&t._UZ(0,"input",24),2&r){const n=t.oxw().$implicit;let o;t.Q6J("formControlName",n.key)("required",null!==(o=n.required)&&void 0!==o&&o)}}function U(r,u){if(1&r&&t._UZ(0,"input",25),2&r){const n=t.oxw().$implicit;let o;t.Q6J("formControlName",n.key)("required",null!==(o=n.required)&&void 0!==o&&o)}}function N(r,u){if(1&r&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&r){const n=u.$implicit;t.Q6J("value",n.value),t.xp6(1),t.Oqu(n.displayValue)}}function A(r,u){if(1&r){const n=t.EpF();t.TgZ(0,"select",26),t.NdJ("change",function(a){t.CHM(n);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.onSelectChange(a,i.key))}),t.YNc(1,N,2,2,"option",27),t.qZA()}if(2&r){const n=t.oxw().$implicit;t.Q6J("formControlName",n.key),t.xp6(1),t.Q6J("ngForOf",n.options)}}function q(r,u){if(1&r&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&r){const n=t.oxw().$implicit;t.xp6(1),t.hij(" ",n.displayName," es requerido. ")}}function I(r,u){if(1&r&&(t.TgZ(0,"div",12),t.YNc(1,d,3,2,"label",13),t.YNc(2,g,1,3,"input",14),t.YNc(3,h,1,3,"input",15),t.YNc(4,C,1,2,"input",16),t.YNc(5,U,1,2,"input",17),t.YNc(6,A,2,2,"select",18),t.YNc(7,q,2,1,"div",19),t.qZA()),2&r){const n=u.$implicit,o=t.oxw(2);let a;t.xp6(1),t.Q6J("ngIf",n.displayName),t.xp6(1),t.Q6J("ngIf","hidden"===n.type),t.xp6(1),t.Q6J("ngIf","text"===n.type||"email"===n.type),t.xp6(1),t.Q6J("ngIf","number"===n.type),t.xp6(1),t.Q6J("ngIf","date"===n.type),t.xp6(1),t.Q6J("ngIf","select"===n.type),t.xp6(1),t.Q6J("ngIf",(null==(a=o.form.get(n.key))?null:a.invalid)&&(null==(a=o.form.get(n.key))?null:a.touched))}}function O(r,u){if(1&r&&(t.TgZ(0,"button",30),t._uU(1,"Actualizar"),t.qZA()),2&r){const n=t.oxw(2);t.Q6J("disabled",n.form.invalid)}}function J(r,u){if(1&r&&(t.TgZ(0,"button",31),t._uU(1,"Procesar"),t.qZA()),2&r){const n=t.oxw(2);t.Q6J("disabled",n.form.invalid)}}function Q(r,u){if(1&r){const n=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(n);const a=t.oxw();return t.KtG(a.onSubmit())}),t.YNc(1,I,8,7,"div",9),t.YNc(2,O,2,1,"button",10),t.YNc(3,J,2,1,"button",11),t.qZA()}if(2&r){const n=t.oxw();t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("ngForOf",n.config.columns),t.xp6(1),t.Q6J("ngIf",n.entityData),t.xp6(1),t.Q6J("ngIf",!n.entityData)}}let F=(()=>{class r{constructor(n){this.fb=n,this.event=new t.vpe,this.success=!0,this.loading=!1}ngOnInit(){this.form=this.createGroup()}ngOnChanges(n){n.entityData&&n.entityData.previousValue!==n.entityData.currentValue&&(this.form=this.createGroup())}createGroup(){const n=this.fb.group({});return this.config&&this.config.columns&&this.config.columns.forEach(o=>{const a=this.entityData?this.entityData[o.key]:"";let i=o.required?[c.kI.required]:[];"email"===o.type&&i.push(c.kI.email);let s=this.fb.control(a,i);"date"===o.type&&s.setValue(a?new Date(a).toISOString().substring(0,10):""),n.addControl(o.key,s)}),n}onSubmit(){this.form.valid&&this.event.emit(this.form.value)}onSelectChange(n,o){const i=n.target.value;i&&this.config.columns.find(s=>s.key===o)?.changevalue&&this.event.emit({data:i})}static#t=this.\u0275fac=function(o){return new(o||r)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-formulario"]],inputs:{config:"config",entityData:"entityData",message:"message",success:"success",loading:"loading"},outputs:{event:"event"},features:[t.TTD],decls:4,vars:3,consts:[["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"container","p-4"],["class","d-flex  justify-content-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[3,"formGroup","ngSubmit"],["class","form-group mb-2",4,"ngFor","ngForOf"],["type","submit","class","btn btn-success mt-2",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary mt-2",3,"disabled",4,"ngIf"],[1,"form-group","mb-2"],["class","text-secondary",4,"ngIf"],["type","hidden",3,"name","value","required",4,"ngIf"],["class","form-control",3,"type","formControlName","required",4,"ngIf"],["type","number","class","form-control","step","any",3,"formControlName","required",4,"ngIf"],["type","date","class","form-control",3,"formControlName","required",4,"ngIf"],["class","form-select",3,"formControlName","change",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-secondary"],[4,"ngIf"],["type","hidden",3,"name","value","required"],[1,"form-control",3,"type","formControlName","required"],["type","number","step","any",1,"form-control",3,"formControlName","required"],["type","date",1,"form-control",3,"formControlName","required"],[1,"form-select",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mt-2",3,"disabled"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"]],template:function(o,a){1&o&&(t.YNc(0,y,2,5,"div",0),t.TgZ(1,"div",1),t.YNc(2,f,4,0,"div",2),t.YNc(3,Q,4,4,"form",3),t.qZA()),2&o&&(t.Q6J("ngIf",a.message),t.xp6(2),t.Q6J("ngIf",a.loading),t.xp6(1),t.Q6J("ngIf",a.form&&!a.loading))},dependencies:[e.mk,e.sg,e.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.Q7,c.sg,c.u,p.N],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #0000001a}.alert[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;border-radius:4px;animation:_ngcontent-%COMP%_fadeAlert .5s}@keyframes _ngcontent-%COMP%_fadeAlert{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})}return r})()},4036:(Z,x,l)=>{l.d(x,{z:()=>e});var t=l(6973),c=l(305);function e(p,v){const y="object"==typeof v;return new Promise((f,_)=>{const d=new c.Hp({next:g=>{f(g),d.unsubscribe()},error:_,complete:()=>{y?f(v.defaultValue):_(new t.K)}});p.subscribe(d)})}},5861:(Z,x,l)=>{function t(e,p,v,y,f,_,d){try{var g=e[_](d),h=g.value}catch(C){return void v(C)}g.done?p(h):Promise.resolve(h).then(y,f)}function c(e){return function(){var p=this,v=arguments;return new Promise(function(y,f){var _=e.apply(p,v);function d(h){t(_,y,f,d,g,"next",h)}function g(h){t(_,y,f,d,g,"throw",h)}d(void 0)})}}l.d(x,{Z:()=>c})}}]);