"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[859],{9859:(Y,Z,p)=>{p.r(Z),p.d(Z,{SecretariaAlumnosModule:()=>re});var i=p(6223),d=p(6814),_=p(4887),h=p(5861),T=p(2451),A=p(4036),e=p(9468),v=p(932),y=p(4013),I=p(6299);const S=function(r){return["/secretaria/alumnos/view",r]};function J(r,u){if(1&r&&(e.TgZ(0,"li",17)(1,"div",18)(2,"div",19),e._UZ(3,"img",20),e.qZA(),e.TgZ(4,"div",21)(5,"h6",22),e._uU(6),e.qZA(),e.TgZ(7,"p",23),e._uU(8),e.qZA()()(),e._UZ(9,"div"),e.qZA()),2&r){const t=u.$implicit;e.Q6J("routerLink",e.VKq(6,S,t.id)),e.xp6(3),e.Q6J("src",t.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",t.primer_apellido," ",t.segundo_apellido," "),e.xp6(2),e.AsE(" ",t.primer_nombre," ",t.segundo_nombre," ")}}let w=(()=>{class r{constructor(t,o,a,l,f){this.router=t,this.route=o,this.crudService=a,this.crudTipodocumentoService=l,this.fb=f,this.success=!0,this.loading=!1,this.loading2=!1,this.data=new T.n,this.searchList=[],this.newList=[],this.tipoDoc=[]}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.loading=!0,t.id=t.route.snapshot.params.id,t.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"}],actions:{}},t.tipoDoc=yield(0,A.z)(t.crudTipodocumentoService.read("/secretaria/tipo_documentos")),t.onResetForm(),t.crudService.read("/secretaria/alumnos/nuevos").subscribe({next:o=>{t.newList=o.data,t.success=!0,t.loading=!1,t.onResetForm()},error:o=>{t.message="Error al crear el docente : "+o,t.success=!1,t.loading=!1}})})()}onResetForm(){this.data=new T.n;const t=this.tipoDoc.filter(a=>"activo"===a.estado).map(a=>({value:a.id.toString(),displayValue:a.nombre})),o=this.config.columns.find(a=>"tipo_documento"===a.key);o&&(o.options=t)}onAgregar(t){this.loading=!0,this.crudService.create(t,"/secretaria/alumnos/add").subscribe({next:o=>{this.message=o.message,this.success=!0,this.loading=!1,this.onResetForm()},error:o=>{this.message="Error al crear el alumno : "+o,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}onEvent(t){var o=this;return(0,h.Z)(function*(){t.term?(o.loading2=!0,yield o.crudService.read("/secretaria/alumnos/search/"+t.term).subscribe({next:a=>{o.searchList=a.data,o.loading2=!1},error:a=>{o.message="Error al cargar el alumnos : "+a,o.success=!1,o.loading=!1}})):t.user&&o.router.navigate(["/secretaria/alumnos/view/",t.user])})()}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(_.F0),e.Y36(_.gz),e.Y36(v.I),e.Y36(v.I),e.Y36(i.qu))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-alumnos"]],decls:19,vars:8,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"row"],[1,"col-5"],[3,"loading","message","success","config","entityData","event"],[1,"col-4"],[1,"card","mb-2"],[1,"card-body"],[3,"users","loading","event"],[1,"card"],[1,"card-header","bg-transparent"],[1,"mb-0","py-1"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],["class","list-group-item pb-1 cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-3"],[1,"list-group-item","pb-1","cursor",3,"routerLink"],[1,"d-flex"],[1,"flex-shrink-0"],["alt","","width","40",1,"rounded-circle",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"],[1,"mb-0"]],template:function(o,a){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),e._uU(3,"Alumnos"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-formulario",5),e.NdJ("event",function(f){return a.onAgregar(f)}),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-alumno-buscar",9),e.NdJ("event",function(f){return a.onEvent(f)}),e.qZA()()(),e.TgZ(11,"div",10)(12,"div",11)(13,"h6",12),e._uU(14,"\xdaltimos Alumnos"),e.qZA()(),e.TgZ(15,"div",13)(16,"ul",14),e.YNc(17,J,10,8,"li",15),e.qZA()()()(),e._UZ(18,"div",16),e.qZA()),2&o&&(e.xp6(6),e.Q6J("loading",a.loading)("message",a.message)("success",a.success)("config",a.config)("entityData",a.data),e.xp6(4),e.Q6J("users",a.searchList)("loading",a.loading2),e.xp6(7),e.Q6J("ngForOf",a.newList))},dependencies:[d.sg,_.rH,y.o,I.i]})}return r})();class C{constructor(){}}var q=p(6688);function M(r,u){1&r&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),e._UZ(4,"app-loading",5),e.TgZ(5,"h4",6),e._uU(6," Cargando... "),e.qZA()()()()())}const N=function(r,u){return[r,u]};function E(r,u){if(1&r&&(e.TgZ(0,"a",23),e._uU(1,"Editar Perfil"),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("routerLink",e.WLB(1,N,null==t.config||null==t.config.actions?null:t.config.actions.edit,t.alumno.id))}}function U(r,u){if(1&r&&(e.TgZ(0,"a",23),e._uU(1,"Modificar Matricula"),e.qZA()),2&r){const t=e.oxw(2);e.Q6J("routerLink",e.WLB(1,N,null==t.config||null==t.config.actions?null:t.config.actions.modify,t.alumno.id))}}function k(r,u){if(1&r&&(e.TgZ(0,"div",24)(1,"h6",25),e._uU(2,"Matricula Acad\xe9mica (Actual)"),e.qZA(),e.TgZ(3,"h5",26),e._uU(4),e.qZA(),e.TgZ(5,"p",26),e._uU(6),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(4),e.AsE(" Curso: ",t.matricula.curso.nombre," (",t.matricula.curso.grado.nombre,") "),e.xp6(2),e.lnq(" Director: ",t.matricula.curso.director.primer_nombre," ",t.matricula.curso.director.segundo_nombre," ",t.matricula.curso.director.primer_apellido," ")}}function F(r,u){if(1&r&&(e.TgZ(0,"button",32),e._uU(1),e.qZA()),2&r){const t=u.$implicit;e.ekj("active",0===u.index),e.uIk("id","pill"+t.id)("data-bs-target","#pillContent"+t.id),e.xp6(1),e.hij(" ",t.curso.nombre," ")}}function Q(r,u){if(1&r&&(e.TgZ(0,"small",39),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.estado," ")}}function s(r,u){if(1&r&&(e.TgZ(0,"li",40)(1,"div",41)(2,"div",42)(3,"h6",13),e._uU(4),e.qZA(),e.TgZ(5,"p",26),e._uU(6),e.qZA()()(),e._UZ(7,"div"),e.qZA()),2&r){const t=u.$implicit;e.xp6(4),e.hij(" ",t.materia.nombre," "),e.xp6(2),e.HOy(" ",t.docente.primer_nombre," ",t.docente.segundo_nombre," ",t.docente.primer_apellido," ",t.docente.segundo_apellido," ")}}function g(r,u){if(1&r&&(e.TgZ(0,"div",33)(1,"div",34)(2,"h5",25)(3,"small"),e._uU(4),e.qZA()(),e.TgZ(5,"h6",35),e._uU(6),e.qZA(),e.YNc(7,Q,2,1,"small",36),e.qZA(),e.TgZ(8,"ul",37),e.YNc(9,s,8,5,"li",38),e.qZA()()),2&r){const t=u.$implicit,o=u.index;e.ekj("active",0===o)("show",0===o),e.uIk("id","pillContent"+t.id),e.xp6(4),e.hij(" ",t.curso.grado.nombre," "),e.xp6(2),e.hij(" ",t.curso.nombre," "),e.xp6(1),e.Q6J("ngIf","activo"!=t.estado),e.xp6(2),e.Q6J("ngForOf",t.curso.asignaciones)}}function n(r,u){if(1&r&&(e.TgZ(0,"div",27)(1,"nav")(2,"div",28),e.YNc(3,F,2,5,"button",29),e.qZA()(),e.TgZ(4,"div",30),e.YNc(5,g,10,9,"div",31),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.matriculas),e.xp6(2),e.Q6J("ngForOf",t.matriculas)}}function c(r,u){if(1&r&&(e.TgZ(0,"div",1)(1,"div",7),e._UZ(2,"i",8),e._uU(3," Expediente "),e.qZA(),e.TgZ(4,"div",2)(5,"div",9)(6,"div",10),e._UZ(7,"img",11),e.qZA(),e.TgZ(8,"div",12)(9,"h4",13),e._uU(10),e.qZA(),e.TgZ(11,"h5",14),e._uU(12),e.qZA(),e.TgZ(13,"p",15)(14,"small"),e._uU(15),e.qZA()(),e.TgZ(16,"div",16)(17,"a",17),e._UZ(18,"i",18),e.qZA(),e.TgZ(19,"ul",19)(20,"li"),e.YNc(21,E,2,4,"a",20),e.qZA(),e.TgZ(22,"li"),e.YNc(23,U,2,4,"a",20),e.qZA()()()()(),e.YNc(24,k,7,5,"div",21),e.YNc(25,n,6,2,"div",22),e.qZA()()),2&r){const t=e.oxw();e.xp6(7),e.Q6J("src",t.alumno.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",t.alumno.primer_apellido," ",t.alumno.segundo_apellido," "),e.xp6(2),e.AsE(" ",t.alumno.primer_nombre," ",t.alumno.segundo_nombre," "),e.xp6(3),e.hij(" ",t.alumno.email," "),e.xp6(6),e.Q6J("ngIf",null==t.config||null==t.config.actions?null:t.config.actions.edit),e.xp6(2),e.Q6J("ngIf",null==t.config||null==t.config.actions?null:t.config.actions.modify),e.xp6(1),e.Q6J("ngIf",null==t.matricula?null:t.matricula.id),e.xp6(1),e.Q6J("ngIf",t.matriculas.length>0)}}let m=(()=>{class r{constructor(){this.matriculas=[],this.loading=!1}ngOnInit(){return(0,h.Z)(function*(){})()}ngOnChanges(t){const o=this.matriculas.find(a=>"activo"===a.estado);o&&(this.matricula=new C,this.matricula=o)}static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-alumno-expediente"]],inputs:{alumno:"alumno",matriculas:"matriculas",loading:"loading",config:"config"},features:[e.TTD],decls:2,vars:2,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[1,"card-header","bg-transparent"],[1,"fa-solid","fa-list","me-2"],[1,"d-flex","mb-2","p-2","border","bg-light"],[1,"flex-shrink-0"],["alt","","width","96",1,"ms-2","rounded-circle","me-1","border",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"],[1,"p-0","mb-0","text-secondary"],[1,"p-0","mb-0","text-secondary",2,"line-height","1rem"],[1,"btn-group","mt-1"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-dark","py-1","dropdown-toggle"],[1,"fa-solid","fa-gear"],[1,"dropdown-menu"],["class","dropdown-item",3,"routerLink",4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],["class","expediente",4,"ngIf"],[1,"dropdown-item",3,"routerLink"],["role","alert",1,"alert","alert-info"],[1,"text-secondary","mb-0"],[1,"mb-0"],[1,"expediente"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["class","nav-link","data-bs-toggle","pill",3,"active",4,"ngFor","ngForOf"],["id","nav-tabContent",1,"tab-content"],["class","tab-pane fade",3,"active","show",4,"ngFor","ngForOf"],["data-bs-toggle","pill",1,"nav-link"],[1,"tab-pane","fade"],[1,"my-2","alert","alert-secondary","border"],[1,"mb-0","font-monospace","text-secondary"],["style","text-transform: uppercase; font-style: italic;","class","text-secondary",4,"ngIf"],[1,"list-group","list-group-flush"],["class","list-group-item pb-1",4,"ngFor","ngForOf"],[1,"text-secondary",2,"text-transform","uppercase","font-style","italic"],[1,"list-group-item","pb-1"],[1,"d-flex"],[1,"flex-grow-1"]],template:function(o,a){1&o&&(e.YNc(0,M,7,0,"div",0),e.YNc(1,c,26,10,"div",0)),2&o&&(e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[d.sg,d.O5,_.rH,q.N]})}return r})();function x(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"p"),e._uU(4,"Actualmente, el estudiante no est\xe1 matriculado en el sistema."),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"p",10),e._uU(7,"Por favor, selecciona el curso al que deseas matricular al estudiante para el ciclo lectivo."),e.qZA()(),e.TgZ(8,"app-formulario",11),e.NdJ("event",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onMatricular(a))}),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(8),e.Q6J("loading",t.loading)("message",t.message)("success",t.success)("config",t.config)}}let b=(()=>{class r{constructor(t,o,a,l){this.route=t,this.crudService=o,this.crudMatriculaService=a,this.crudCursoService=l,this.success=!0,this.loading=!1,this.matriculas=[],this.cursos=[]}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.loading=!0,t.id=t.route.snapshot.params.id,t.config={columns:[{key:"curso",displayName:"Curso",required:!0,type:"select",options:[]},{key:"alumno",type:"hidden"}],actions:{}},t.config2={actions:{edit:"/secretaria/alumnos/edit",view:"/secretaria/alumnos/detail",modify:"/secretaria/alumnos/modify"}},t.cargarMatricula()})()}cargarMatricula(){var t=this;return(0,h.Z)(function*(){t.cursos=[],yield t.crudService.read("/secretaria/alumnos/"+t.id).subscribe({next:o=>{t.data=o.data,t.matriculas=o.data.matriculas,t.matriculas.find(l=>"activo"===l.estado)||t.cursosDisponibles(),t.loading=!1},error:o=>{t.message="Error al cargar el curso : "+o,t.success=!1,t.loading=!1}})})()}cursosDisponibles(){this.crudCursoService.read("/secretaria/cursos/pa-matricular/"+this.id).subscribe({next:t=>{this.cursos=t.data;const o=this.cursos.filter(l=>"activo"===l.estado).map(l=>({value:l.id.toString(),displayValue:l.nombre+" ["+l.grado.nombre+"]"})),a=this.config.columns.find(l=>"curso"===l.key);a&&(a.options=o)},error:t=>{this.message="Error al cargar el curso : "+t,this.success=!1,this.loading=!1}})}onMatricular(t){t.alumno=this.id,this.crudCursoService.create(t,"/secretaria/matricula").subscribe({next:o=>{o.data&&this.cargarMatricula()},error:o=>{this.message="Error al cargar el curso : "+o,this.success=!1,this.loading=!1}})}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(_.gz),e.Y36(v.I),e.Y36(v.I),e.Y36(v.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-alumnos-view"]],decls:9,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/alumnos"],["aria-current","page",1,"breadcrumb-item","active"],[3,"alumno","matriculas","loading","config"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],["role","alert",1,"alert","alert-success"],[1,"mb-0"],[3,"loading","message","success","config","event"]],template:function(o,a){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Alumnos"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Detalle"),e.qZA()()(),e._UZ(7,"app-alumno-expediente",5),e.YNc(8,x,9,4,"div",6)),2&o&&(e.xp6(7),e.Q6J("alumno",a.data)("matriculas",a.matriculas)("loading",a.loading)("config",a.config2),e.xp6(1),e.Q6J("ngIf",a.cursos.length>0))},dependencies:[d.O5,_.rH,y.o,m],styles:[".alert-success[_ngcontent-%COMP%]{background-color:#e9f7df;border-color:#b8d8b8;color:#155724;border-radius:8px;padding:20px;box-shadow:0 2px 4px #0000001a}.alert-heading[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:.5em}p[_ngcontent-%COMP%]{font-size:1em;line-height:1.5}hr[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em;border-top:1px solid #b8d8b8}.mb-0[_ngcontent-%COMP%]{margin-bottom:0}"]})}return r})();const O=function(r){return["/secretaria/alumnos/view",r]};function D(r,u){if(1&r&&(e.TgZ(0,"li",2)(1,"a",8),e._uU(2,"Detalle"),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(1,O,t.id))}}let j=(()=>{class r{constructor(t,o,a){this.route=t,this.crudService=o,this.crudTipodocumentoService=a,this.success=!0,this.loading=!1}ngOnInit(){var t=this;return(0,h.Z)(function*(){t.id=t.route.snapshot.params.id,t.loading=!0,t.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"rol",type:"hidden",value:t.id},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"}],actions:{}};const a=(yield(0,A.z)(t.crudTipodocumentoService.read("/secretaria/tipo_documentos"))).filter(f=>"activo"===f.estado).map(f=>({value:f.id.toString(),displayValue:f.nombre})),l=t.config.columns.find(f=>"tipo_documento"===f.key);l&&(l.options=a),yield t.crudService.read("/secretaria/alumnos/"+t.id).subscribe({next:f=>{t.data=f.data,t.loading=!1},error:f=>{t.message="Error al cargar el docente : "+f,t.success=!1,t.loading=!1}})})()}onAgregar(t){this.loading=!0,this.crudService.update(t,"/secretaria/alumnos/"+this.id).subscribe({next:o=>{this.message=o.message,this.success=!0,this.loading=!1},error:o=>{this.message="Error al crear el usuario : "+o,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(_.gz),e.Y36(v.I),e.Y36(v.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-alumnos-edit"]],decls:13,vars:6,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/alumnos"],["class","breadcrumb-item",4,"ngIf"],["aria-current","page",1,"breadcrumb-item","active"],["role","alert",1,"alert","alert-warning"],[3,"loading","message","success","config","entityData","event"],[3,"routerLink"]],template:function(o,a){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Alumnos"),e.qZA()(),e.YNc(5,D,3,3,"li",4),e.TgZ(6,"li",5),e._uU(7,"Editar"),e.qZA()()(),e.TgZ(8,"div",6)(9,"strong"),e._uU(10,"\xa1Importante!"),e.qZA(),e._uU(11," Los cambios realizados en el registro ser\xe1n notificados v\xeda correo electr\xf3nico al usuario titular de la misma.\n"),e.qZA(),e.TgZ(12,"app-formulario",7),e.NdJ("event",function(f){return a.onAgregar(f)}),e.qZA()),2&o&&(e.xp6(5),e.Q6J("ngIf",a.id),e.xp6(7),e.Q6J("loading",a.loading)("message",a.message)("success",a.success)("config",a.config)("entityData",a.data))},dependencies:[d.O5,_.rH,y.o]})}return r})();var L=p(1205);function P(r,u){1&r&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),e._UZ(4,"app-loading",6),e.TgZ(5,"h4",7),e._uU(6," Cargando... "),e.qZA()()()()())}function V(r,u){if(1&r&&(e.TgZ(0,"li",19)(1,"a",20),e._uU(2),e.qZA()()),2&r){const t=u.$implicit,o=u.index,a=e.oxw(2);e.xp6(1),e.ekj("active",a.currentStep===o+1),e.xp6(1),e.Oqu(t.title)}}function z(r,u){if(1&r&&(e.TgZ(0,"div",24)(1,"h5",25),e._uU(2),e.qZA(),e.TgZ(3,"p",25),e._uU(4),e.qZA()()),2&r){const t=e.oxw(4);e.xp6(2),e.AsE(" Curso: ",t.matricula.curso.nombre," (",t.matricula.curso.grado.nombre,") "),e.xp6(2),e.lnq(" Director: ",t.matricula.curso.director.primer_nombre," ",t.matricula.curso.director.segundo_nombre," ",t.matricula.curso.director.primer_apellido," ")}}function $(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,z,5,5,"div",22),e.TgZ(2,"app-formulario",23),e.NdJ("event",function(a){e.CHM(t);const l=e.oxw(3);return e.KtG(l.onModificar(a))}),e.qZA()()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.matricula?null:t.matricula.id),e.xp6(1),e.Q6J("loading",t.loading)("config",t.config)}}function G(r,u){if(1&r&&(e.TgZ(0,"div",30)(1,"h5",25),e._uU(2),e.qZA(),e.TgZ(3,"p",25),e._uU(4),e.qZA(),e.TgZ(5,"p")(6,"small"),e._uU(7),e.qZA()()()),2&r){const t=e.oxw(4);e.Q6J("ngClass","alert alert-"+t.cambio.mensaje.alert),e.xp6(2),e.AsE(" Curso: ",t.nuevocurso.nombre," (",t.nuevocurso.grado.nombre,") "),e.xp6(2),e.lnq(" Director: ",null==t.nuevocurso.director?null:t.nuevocurso.director.primer_nombre," ",null==t.nuevocurso.director?null:t.nuevocurso.director.segundo_nombre," ",null==t.nuevocurso.director?null:t.nuevocurso.director.primer_apellido," "),e.xp6(3),e.hij(" ",t.cambio.mensaje.msg," ")}}function H(r,u){if(1&r){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,G,8,7,"div",26),e.TgZ(2,"div",27)(3,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.currentStep=1)}),e._uU(4," Volver "),e.qZA(),e.TgZ(5,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.onConfirmar())}),e._uU(6," Confirmar "),e.qZA()()()}if(2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.nuevocurso?null:t.nuevocurso.id)}}function K(r,u){if(1&r&&(e.TgZ(0,"div",30)(1,"h4",25),e._uU(2),e.qZA(),e.TgZ(3,"h5",25),e._uU(4),e.qZA()()),2&r){const t=e.oxw(4);e.Q6J("ngClass","alert alert-success"),e.xp6(2),e.AsE(" Curso: ",t.matricula.curso.nombre," (",t.matricula.curso.grado.nombre,") "),e.xp6(2),e.lnq(" Director: ",null==t.matricula.curso.director?null:t.matricula.curso.director.primer_nombre," ",null==t.matricula.curso.director?null:t.matricula.curso.director.segundo_nombre," ",null==t.matricula.curso.director?null:t.matricula.curso.director.primer_apellido," ")}}function B(r,u){if(1&r&&(e.TgZ(0,"div"),e.YNc(1,K,5,6,"div",26),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.matricula.curso?null:t.matricula.curso.id)}}function R(r,u){if(1&r&&(e.TgZ(0,"div",3),e.YNc(1,$,3,3,"div",21),e.YNc(2,H,7,1,"div",21),e.YNc(3,B,2,1,"div",21),e.qZA()),2&r){const t=u.index,o=e.oxw(2);e.ekj("d-none",o.currentStep!==t+1),e.xp6(1),e.Q6J("ngIf",1===o.currentStep),e.xp6(1),e.Q6J("ngIf",2===o.currentStep),e.xp6(1),e.Q6J("ngIf",o.currentStep===o.steps.length)}}function X(r,u){if(1&r&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10),e._UZ(3,"img",11),e.TgZ(4,"h5",12),e._uU(5),e.qZA(),e.TgZ(6,"h6",13),e._uU(7),e.qZA(),e.TgZ(8,"p",14)(9,"small"),e._uU(10),e.qZA()()()(),e.TgZ(11,"div",15)(12,"div",2)(13,"ul",16),e.YNc(14,V,3,3,"li",17),e.qZA(),e.YNc(15,R,4,5,"div",18),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("src",t.alumno.avatar_url,e.LSH),e.xp6(2),e.AsE(" ",t.alumno.primer_apellido," ",t.alumno.segundo_apellido," "),e.xp6(2),e.AsE(" ",t.alumno.primer_nombre," ",t.alumno.segundo_nombre," "),e.xp6(3),e.hij(" ",t.alumno.email," "),e.xp6(4),e.Q6J("ngForOf",t.steps),e.xp6(1),e.Q6J("ngForOf",t.steps)}}class W{constructor(){this.mensajes=[{msg:"El estudiante ser\xe1 enviado a un grado inferior al que estaba matriculado anteriormente, esto es poco com\xfan. Los datos de notas ser\xe1n eliminados. El sistema notificar\xe1 el cambio al director y al estudiante.",alert:"danger"},{msg:"El estudiante ser\xe1 enviado a otro grupo. Las notas se conservar\xe1n y se enviar\xe1n a la cuenta de los nuevos docentes, de ser el caso. El sistema notificar\xe1 el cambio al director y al estudiante.",alert:"info"},{msg:"El estudiante ser\xe1 promovido a un grado superior. El sistema notificar\xe1 el cambio al director y al estudiante. Los datos de notas ser\xe1n eliminados.",alert:"warning"}]}evaluarGrado(){this.mensaje=this.nuevo.grado.orden<this.anterior.grado.orden?this.mensajes[0]:this.nuevo.grado.orden===this.anterior.grado.orden?this.mensajes[1]:this.mensajes[2]}}let ee=(()=>{class r{constructor(){this.cursos=[],this.loading=!1,this.currentStep=1,this.event=new e.vpe,this.steps=[{title:"Selecci\xf3n Curso",description:"Step 1 description",alert:"light"},{title:"Cambios",description:"Step 2 description",alert:"info"},{title:"Finalizaci\xf3n",description:"Step 2 description",alert:"info"}],this.cambio=new W}ngOnInit(){}ngOnChanges(t){this.nuevocurso?.id&&this.matricula?.id&&(this.cambio.anterior=this.matricula.curso,this.cambio.nuevo=this.nuevocurso,this.cambio.evaluarGrado())}onModificar(t){this.loading=!0,this.event.emit({paso:1,data:t}),this.currentStep=2}onConfirmar(){this.loading=!0,this.event.emit({paso:2,data:this.nuevocurso.id}),this.currentStep=3}static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-matricula-modificar"]],inputs:{matricula:"matricula",cursos:"cursos",nuevocurso:"nuevocurso",alumno:"alumno",loading:"loading",config:"config",currentStep:"currentStep"},outputs:{event:"event"},features:[e.TTD],decls:2,vars:2,consts:[["class","card",4,"ngIf"],["class","row",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[1,"row"],[1,"col-xs-12","col-md-2"],[1,"d-flex","flex-column","align-items-center","p-2","border","bg-light"],["alt","","width","96",1,"img-fluid","rounded-circle","border",3,"src"],[1,"my-0","text-break"],[1,"p-0","mb-0","text-secondary","text-break"],[1,"p-0","mb-0","text-secondary","text-break",2,"line-height","1rem"],[1,"cols-xs-12","col-md-7"],[1,"nav","nav-pills","nav-justified","mt-3","border-bottom","border-top"],["class","nav-item",4,"ngFor","ngForOf"],["class","card-body",3,"d-none",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","cursor"],[4,"ngIf"],["class","alert alert-info","role","alert",4,"ngIf"],[3,"loading","config","event"],["role","alert",1,"alert","alert-info"],[1,"mb-0"],["role","alert",3,"ngClass",4,"ngIf"],[1,"d-flex","justify-content-between","gap-2"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],["role","alert",3,"ngClass"]],template:function(o,a){1&o&&(e.YNc(0,P,7,0,"div",0),e.YNc(1,X,16,8,"div",1)),2&o&&(e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[d.mk,d.sg,d.O5,y.o,q.N],styles:[".nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#5a5e64;border-radius:0}"]})}return r})();const te=[{path:"",component:w},{path:"view/:id",component:b},{path:"edit/:id",component:j},{path:"modify/:id",component:(()=>{class r{constructor(t,o,a,l){this.route=t,this.crudService=o,this.crudMatriculaService=a,this.crudCursoService=l,this.loading=!1,this.cursos=[],this.nuevoCurso=new L.O,this.matriculas=[],this.matricula=new C,this.success=!0,this.paso=1}ngOnInit(){this.loading=!0,this.id=this.route.snapshot.params.id,this.config={columns:[{key:"curso",displayName:"Curso",required:!0,type:"select",options:[]},{key:"alumno",type:"hidden"}],actions:{}},this.cargarMatricula()}cargarMatricula(){var t=this;return(0,h.Z)(function*(){t.cursos=[],yield t.crudService.read("/secretaria/alumnos/"+t.id).subscribe({next:o=>{t.data=o.data,t.matriculas=o.data.matriculas,t.matricula=t.matriculas.find(a=>"activo"===a.estado),t.cargarCursos()},error:o=>{t.message="Error al cargar el curso : "+o,t.success=!1,t.loading=!1}})})()}cargarCursos(){this.crudCursoService.read("/secretaria/cursos").subscribe({next:t=>{this.cursos=t;const o=this.cursos.filter(l=>"activo"===l.estado&&l.id!=this.matricula.curso.id).map(l=>({value:l.id.toString(),displayValue:l.nombre+" ["+l.grado.nombre+"]"})),a=this.config.columns.find(l=>"curso"===l.key);a&&(a.options=o),this.loading=!1},error:t=>{this.message="Error al cargar el curso : "+t,this.success=!1,this.loading=!1}})}onEvento(t){var o=this;return(0,h.Z)(function*(){switch(t.paso){case 1:o.loading=!0,yield o.crudService.read("/secretaria/cursos/"+t.data.curso).subscribe({next:a=>{o.loading=!1,o.nuevoCurso=a.data},error:a=>{o.message="Error al cargar el curso : "+a,o.success=!1,o.loading=!1}}),o.paso=2;break;case 2:o.loading=!0,o.matricula.curso=t.data,yield o.crudMatriculaService.update(o.matricula,"/secretaria/matricula/"+o.matricula.id).subscribe({next:a=>{o.loading=!1,o.matricula=a.data},error:a=>{o.message="Error al cargar el curso : "+a,o.success=!1,o.loading=!1}})}})()}static#e=this.\u0275fac=function(o){return new(o||r)(e.Y36(_.gz),e.Y36(v.I),e.Y36(v.I),e.Y36(v.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-alumnos-modify"]],decls:8,vars:6,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/alumnos"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","alumno","matricula","nuevocurso","config","currentStep","event"]],template:function(o,a){1&o&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Alumnos"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Detalle"),e.qZA()()(),e.TgZ(7,"app-matricula-modificar",5),e.NdJ("event",function(f){return a.onEvento(f)}),e.qZA()),2&o&&(e.xp6(7),e.Q6J("loading",a.loading)("alumno",a.data)("matricula",a.matricula)("nuevocurso",a.nuevoCurso)("config",a.config)("currentStep",a.paso))},dependencies:[_.rH,ee]})}return r})()}];let ie=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(te),_.Bz]})}return r})();var oe=p(6208);let re=(()=>{class r{static#e=this.\u0275fac=function(o){return new(o||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[d.ez,ie,i.UX,oe.m]})}return r})()},4013:(Y,Z,p)=>{p.d(Z,{o:()=>Q});var i=p(9468),d=p(6223),_=p(6814),h=p(6688);const T=function(s,g){return{"alert-success":s,"alert-danger":g}};function A(s,g){if(1&s&&(i.TgZ(0,"div",4),i._uU(1),i.qZA()),2&s){const n=i.oxw();i.Q6J("ngClass",i.WLB(2,T,n.success,!n.success)),i.xp6(1),i.hij(" ",n.message,"\n")}}function e(s,g){if(1&s&&(i.TgZ(0,"div",5),i._UZ(1,"app-loading",6),i.TgZ(2,"h4",7),i._uU(3),i.qZA()()),2&s){const n=i.oxw();i.xp6(3),i.hij(" Cargando ",n.msg,"... ")}}function v(s,g){1&s&&(i.TgZ(0,"span"),i._uU(1,"*"),i.qZA())}function y(s,g){if(1&s&&(i.TgZ(0,"label",21),i.YNc(1,v,2,0,"span",22),i._uU(2),i.qZA()),2&s){const n=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",n.required),i.xp6(1),i.hij(" ",n.displayName," ")}}function I(s,g){if(1&s&&i._UZ(0,"input",23),2&s){const n=i.oxw().$implicit;let c;i.Q6J("name",n.key)("value",n.value)("required",null!==(c=n.required)&&void 0!==c&&c)}}function S(s,g){if(1&s&&i._UZ(0,"input",24),2&s){const n=i.oxw().$implicit;let c;i.s9C("type",n.type),i.Q6J("formControlName",n.key)("required",null!==(c=n.required)&&void 0!==c&&c)}}function J(s,g){if(1&s&&i._UZ(0,"input",25),2&s){const n=i.oxw().$implicit;let c;i.Q6J("formControlName",n.key)("required",null!==(c=n.required)&&void 0!==c&&c)}}function w(s,g){if(1&s&&i._UZ(0,"textarea",26),2&s){const n=i.oxw().$implicit;let c;i.Q6J("formControlName",n.key)("required",null!==(c=n.required)&&void 0!==c&&c)}}function C(s,g){if(1&s&&i._UZ(0,"input",27),2&s){const n=i.oxw().$implicit;let c;i.Q6J("formControlName",n.key)("required",null!==(c=n.required)&&void 0!==c&&c)}}function q(s,g){if(1&s&&(i.TgZ(0,"option",30),i._uU(1),i.qZA()),2&s){const n=g.$implicit;i.Q6J("value",n.value),i.xp6(1),i.Oqu(n.displayValue)}}function M(s,g){if(1&s){const n=i.EpF();i.TgZ(0,"select",28),i.NdJ("change",function(m){i.CHM(n);const x=i.oxw().$implicit,b=i.oxw(2);return i.KtG(b.onSelectChange(m,x.key))}),i.YNc(1,q,2,2,"option",29),i.qZA()}if(2&s){const n=i.oxw().$implicit;i.Q6J("formControlName",n.key),i.xp6(1),i.Q6J("ngForOf",n.options)}}function N(s,g){if(1&s&&(i.TgZ(0,"div",31),i._uU(1),i.qZA()),2&s){const n=i.oxw().$implicit;i.xp6(1),i.hij(" ",n.displayName," es requerido. ")}}function E(s,g){if(1&s&&(i.TgZ(0,"div",12),i.YNc(1,y,3,2,"label",13),i.YNc(2,I,1,3,"input",14),i.YNc(3,S,1,3,"input",15),i.YNc(4,J,1,2,"input",16),i.YNc(5,w,1,2,"textarea",17),i.YNc(6,C,1,2,"input",18),i.YNc(7,M,2,2,"select",19),i.YNc(8,N,2,1,"div",20),i.qZA()),2&s){const n=g.$implicit,c=i.oxw(2);let m;i.xp6(1),i.Q6J("ngIf",n.displayName),i.xp6(1),i.Q6J("ngIf","hidden"===n.type),i.xp6(1),i.Q6J("ngIf","text"===n.type||"email"===n.type),i.xp6(1),i.Q6J("ngIf","number"===n.type),i.xp6(1),i.Q6J("ngIf","textarea"===n.type),i.xp6(1),i.Q6J("ngIf","date"===n.type),i.xp6(1),i.Q6J("ngIf","select"===n.type),i.xp6(1),i.Q6J("ngIf",(null==(m=c.form.get(n.key))?null:m.invalid)&&(null==(m=c.form.get(n.key))?null:m.touched))}}function U(s,g){if(1&s&&(i.TgZ(0,"button",32),i._uU(1,"Actualizar"),i.qZA()),2&s){const n=i.oxw(2);i.Q6J("disabled",n.form.invalid)}}function k(s,g){if(1&s&&(i.TgZ(0,"button",33),i._uU(1,"Procesar"),i.qZA()),2&s){const n=i.oxw(2);i.Q6J("disabled",n.form.invalid)}}function F(s,g){if(1&s){const n=i.EpF();i.TgZ(0,"form",8),i.NdJ("ngSubmit",function(){i.CHM(n);const m=i.oxw();return i.KtG(m.onSubmit())}),i.YNc(1,E,9,8,"div",9),i.YNc(2,U,2,1,"button",10),i.YNc(3,k,2,1,"button",11),i.qZA()}if(2&s){const n=i.oxw();i.Q6J("formGroup",n.form),i.xp6(1),i.Q6J("ngForOf",n.config.columns),i.xp6(1),i.Q6J("ngIf",n.entityData),i.xp6(1),i.Q6J("ngIf",!n.entityData)}}let Q=(()=>{class s{constructor(n){this.fb=n,this.event=new i.vpe,this.success=!0,this.loading=!1}ngOnInit(){this.form=this.createGroup()}ngOnChanges(n){n.entityData&&n.entityData.previousValue!==n.entityData.currentValue&&(this.form=this.createGroup())}createGroup(){const n=this.fb.group({});return this.config&&this.config.columns&&this.config.columns.forEach(c=>{const m=this.entityData?this.entityData[c.key]:"";let x=c.required?[d.kI.required]:[];"email"===c.type&&x.push(d.kI.email);let b=this.fb.control(m,x);"date"===c.type&&b.setValue(m?new Date(m).toISOString().substring(0,10):""),n.addControl(c.key,b)}),n}onSubmit(){this.form.valid&&this.event.emit(this.form.value)}onSelectChange(n,c){const x=n.target.value;x&&this.config.columns.find(b=>b.key===c)?.changevalue&&this.event.emit({data:x})}static#e=this.\u0275fac=function(c){return new(c||s)(i.Y36(d.qu))};static#t=this.\u0275cmp=i.Xpm({type:s,selectors:[["app-formulario"]],inputs:{config:"config",entityData:"entityData",message:"message",msg:"msg",success:"success",loading:"loading"},outputs:{event:"event"},features:[i.TTD],decls:4,vars:3,consts:[["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"container","p-4"],["class","d-flex  justify-content-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[3,"formGroup","ngSubmit"],["class","form-group mb-2",4,"ngFor","ngForOf"],["type","submit","class","btn btn-success mt-2",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary mt-2",3,"disabled",4,"ngIf"],[1,"form-group","mb-2"],["class","text-secondary",4,"ngIf"],["type","hidden",3,"name","value","required",4,"ngIf"],["class","form-control",3,"type","formControlName","required",4,"ngIf"],["type","number","class","form-control","step","any",3,"formControlName","required",4,"ngIf"],["class","form-control","rows","3",3,"formControlName","required",4,"ngIf"],["type","date","class","form-control",3,"formControlName","required",4,"ngIf"],["class","form-select",3,"formControlName","change",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-secondary"],[4,"ngIf"],["type","hidden",3,"name","value","required"],[1,"form-control",3,"type","formControlName","required"],["type","number","step","any",1,"form-control",3,"formControlName","required"],["rows","3",1,"form-control",3,"formControlName","required"],["type","date",1,"form-control",3,"formControlName","required"],[1,"form-select",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mt-2",3,"disabled"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"]],template:function(c,m){1&c&&(i.YNc(0,A,2,5,"div",0),i.TgZ(1,"div",1),i.YNc(2,e,4,1,"div",2),i.YNc(3,F,4,4,"form",3),i.qZA()),2&c&&(i.Q6J("ngIf",m.message),i.xp6(2),i.Q6J("ngIf",m.loading),i.xp6(1),i.Q6J("ngIf",m.form&&!m.loading))},dependencies:[_.mk,_.sg,_.O5,d._Y,d.YN,d.Kr,d.Fj,d.wV,d.EJ,d.JJ,d.JL,d.Q7,d.sg,d.u,h.N],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #0000001a}.alert[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;border-radius:4px;animation:_ngcontent-%COMP%_fadeAlert .5s}@keyframes _ngcontent-%COMP%_fadeAlert{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})}return s})()}}]);