<div *ngIf="itemParaEliminar" class="alert alert-danger" role="alert">
  <strong>Confirmar Eliminación</strong> ¿Estás seguro de que deseas eliminar el registro?
  <button type="button" class="btn btn-sm btn-secondary me-2" (click)="cancelarEliminar()">Cancelar</button>
  <button type="button" class="btn btn-sm btn-danger" (click)="confirmarEliminar()">Confirmar</button>
</div>

<div *ngIf="mensajeRespuesta" [ngClass]="{'alert-success': codigoRespuesta === 204, 'alert-danger': codigoRespuesta === 401 || codigoRespuesta === 0}" class="alert" role="alert">
  {{ mensajeRespuesta }}
</div>
<!-- PARA MANEJAR LOS EVENTOS EXTERNOS -->
<div *ngIf="message" [ngClass]="{'alert-success': success, 'alert-danger': !success}" class="alert" role="alert">
  {{ message }}
</div>

<div *ngIf="loading" class="container mt-3">
  <div class="d-flex  justify-content-center">
    <app-loading size="20px"></app-loading>
    <h4 class="ms-2 text-secondary">
      Cargando...
    </h4>
  </div>
</div>
<div *ngIf="!loading" class="container mt-3">
  <!-- Aquí continúa el resto del template para la tabla y demás lógica... -->
  <div class="row mb-2">
    <div class="col">
      <input type="text" class="form-control" placeholder="Buscar..." (input)="filtrarDatos($event)">
    </div>
    <div class="col-auto">
      <button  *ngIf="config.actions.add" class="btn btn-primary" (click)="agregar()">Nuevo</button>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-sm">
      <thead>
        <tr>
          <th *ngFor="let column of config.columns">
            <span *ngIf="column.displayName!=='Estado'">
              {{ column.displayName }}
            </span>
          </th>
          <th *ngIf="config.actions" class="w-auto">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of displayedData">
          <td *ngFor="let column of config.columns">
            <span *ngIf="column.key==='avatar_url'" >
              <img [src]="item[column.key]+'?'+gettime()" alt="Avatar" class="rounded-circle" width="50" height="50">
            </span>
            <span *ngIf="column.key==='estado'" >
              <i *ngIf="item[column.key]==='activo'" class="fa-solid fa-circle-check text-success"></i>
              <i *ngIf="item[column.key]==='inactivo'" class="fa-solid fa-circle-minus text-dark "></i>
              <span *ngIf="item[column.key]!=='inactivo' && item[column.key]!=='activo'">
                {{item[column.key]}}
              </span>
            </span>
            <span *ngIf="column.key!=='estado' && column.key!=='avatar_url'">
              {{ column.key.includes('.') ? getNestedPropertyValue(item, column.key) : item[column.key] }}
            </span>
          </td>
          <td *ngIf="config.actions" class="border-start w-auto">
            <div class="btn-group" role="group" aria-label="Basic example">
              <button *ngIf="config.actions.edit" class="btn border-0 btn-outline-primary" (click)="editar(item)" title="Editar"><i class="fa-solid fa-pencil"></i></button>
              <button *ngIf="config.actions.view" class="btn border-0 btn-outline-info" (click)="ver(item)" title="Ver"><i class="fa-regular fa-eye"></i></button>
              <button *ngIf="config.actions.delete" class="btn border-0 btn-outline-danger" (click)="eliminar(item)" title="Eliminar"><i class="fa-solid fa-trash-can"></i></button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <div  class="d-flex justify-content-between">
    <select class="form-select w-auto ms-0" [(ngModel)]="sizePagina" (change)="calcularPaginacion()">
      <option [value]="10">10</option>
      <option [value]="20">20</option>
      <option [value]="50">50</option>
    </select>
    <ul class="pagination" *ngIf="numeroPaginas > 1">
      <li class="page-item" [class.disabled]="paginaActual === 1">
        <a class="page-link" href="#" (click)="cambiarPagina(paginaActual - 1); $event.preventDefault()">&laquo;</a>
      </li>
      <li class="page-item" *ngFor="let num of [].constructor(numeroPaginas); let i = index" [class.active]="paginaActual === i + 1">
        <a class="page-link" href="#" (click)="cambiarPagina(i + 1); $event.preventDefault()">{{ i + 1 }}</a>
      </li>
      <li class="page-item" [class.disabled]="paginaActual === numeroPaginas">
        <a class="page-link" href="#" (click)="cambiarPagina(paginaActual + 1); $event.preventDefault()">&raquo;</a>
      </li>
    </ul>
  </div>
</div>
