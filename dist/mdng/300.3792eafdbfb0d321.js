"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[300],{8300:(Q,v,m)=>{m.r(v),m.d(v,{SecretariaDocentesModule:()=>s});var t=m(6814),l=m(6985),g=m(5861),h=m(2451),y=m(4036),e=m(9468),_=m(932),b=m(4013),x=m(5574);const Z=function(i){return["/secretaria/docentes/view",i]};function T(i,d){if(1&i&&(e.TgZ(0,"li",17)(1,"div",18)(2,"div",19),e._UZ(3,"img",20),e.qZA(),e.TgZ(4,"div",21)(5,"h6",22),e._uU(6),e.qZA(),e.TgZ(7,"p",22),e._uU(8),e.qZA()()(),e._UZ(9,"div"),e.qZA()),2&i){const o=d.$implicit;e.Q6J("routerLink",e.VKq(6,Z,o.id)),e.xp6(3),e.Q6J("src",o.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",o.primer_nombre," ",o.segundo_nombre," "),e.xp6(2),e.AsE(" ",o.primer_apellido," ",o.segundo_apellido," ")}}let C=(()=>{class i{constructor(o,a,c,f){this.router=o,this.route=a,this.crudService=c,this.crudTipodocumentoService=f,this.success=!0,this.loading=!1,this.loading2=!1,this.data=new h.n,this.searchList=[],this.newList=[],this.tipoDoc=[]}ngOnInit(){var o=this;return(0,g.Z)(function*(){o.loading=!0,o.id=o.route.snapshot.params.id,o.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"}],actions:{}},o.tipoDoc=yield(0,y.z)(o.crudTipodocumentoService.read("/secretaria/tipo_documentos")),o.onResetForm(),o.crudService.read("/secretaria/docentes").subscribe({next:a=>{o.newList=a.data,o.success=!0,o.loading=!1,o.onResetForm()},error:a=>{o.message="Error al crear el docente : "+a,o.success=!1,o.loading=!1}})})()}onResetForm(){this.data=new h.n;const o=this.tipoDoc.filter(c=>"activo"===c.estado).map(c=>({value:c.id.toString(),displayValue:c.nombre})),a=this.config.columns.find(c=>"tipo_documento"===c.key);a&&(a.options=o)}onAgregar(o){this.loading=!0,this.crudService.create(o,"/secretaria/docentes").subscribe({next:a=>{this.message=a.message,this.success=!0,this.loading=!1,this.onResetForm()},error:a=>{this.message="Error al crear el docente : "+a,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}onEvent(o){var a=this;return(0,g.Z)(function*(){o.term?(a.loading2=!0,yield a.crudService.read("/secretaria/docentes/search/"+o.term).subscribe({next:c=>{a.searchList=c.data,a.loading2=!1},error:c=>{a.message="Error al cargar el docentes : "+c,a.success=!1,a.loading=!1}})):o.user&&a.router.navigate(["/secretaria/docentes/view/",o.user])})()}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(l.F0),e.Y36(l.gz),e.Y36(_.I),e.Y36(_.I))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-secretaria-docentes"]],decls:19,vars:9,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"row"],[1,"col-5"],[3,"loading","message","success","config","entityData","event"],[1,"col-4"],[1,"card","mb-2"],[1,"card-body"],[3,"users","loading","placeholder","event"],[1,"card"],[1,"card-header","bg-transparent"],[1,"mb-0","py-1"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],["class","list-group-item pb-1 cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-3"],[1,"list-group-item","pb-1","cursor",3,"routerLink"],[1,"d-flex"],[1,"flex-shrink-0"],["alt","","width","40",1,"rounded-circle",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"]],template:function(a,c){1&a&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),e._uU(3,"Docentes"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4)(6,"app-formulario",5),e.NdJ("event",function(p){return c.onAgregar(p)}),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-alumno-buscar",9),e.NdJ("event",function(p){return c.onEvent(p)}),e.qZA()()(),e.TgZ(11,"div",10)(12,"div",11)(13,"h6",12),e._uU(14,"\xdaltimos Docentes"),e.qZA()(),e.TgZ(15,"div",13)(16,"ul",14),e.YNc(17,T,10,8,"li",15),e.qZA()()()(),e._UZ(18,"div",16),e.qZA()),2&a&&(e.xp6(6),e.Q6J("loading",c.loading)("message",c.message)("success",c.success)("config",c.config)("entityData",c.data),e.xp6(4),e.Q6J("users",c.searchList)("loading",c.loading2)("placeholder","Buscar Docentes"),e.xp6(7),e.Q6J("ngForOf",c.newList))},dependencies:[t.sg,l.rH,b.o,x.i]})}return i})();var A=m(6688);function q(i,d){1&i&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),e._UZ(4,"app-loading",10),e.TgZ(5,"h4",11),e._uU(6," Cargando... "),e.qZA()()()()())}function N(i,d){if(1&i&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&i){const o=d.$implicit;e.xp6(2),e.Oqu(o)}}const F=function(i){return["/secretaria/cursos/view",i]};function D(i,d){if(1&i&&(e.TgZ(0,"ul",27)(1,"li",28)(2,"a",29),e._uU(3),e.qZA()(),e.YNc(4,N,3,1,"ul",30),e.qZA()),2&i){const o=d.$implicit;e.xp6(2),e.Q6J("routerLink",e.VKq(3,F,o.id)),e.xp6(1),e.hij(" Curso: ",o.nombre," "),e.xp6(1),e.Q6J("ngForOf",o.materias)}}function J(i,d){if(1&i&&(e.TgZ(0,"ul",24)(1,"li",25),e._uU(2),e.qZA(),e.YNc(3,D,5,5,"ul",26),e.qZA()),2&i){const o=d.$implicit;e.xp6(2),e.Oqu(o.nombre),e.xp6(1),e.Q6J("ngForOf",o.cursos)}}function w(i,d){if(1&i&&(e.TgZ(0,"ul",21)(1,"li",22),e._uU(2),e.qZA(),e.YNc(3,J,4,2,"ul",23),e.qZA()),2&i){const o=d.$implicit;e.xp6(2),e.hij(" ",o.nombre,""),e.xp6(1),e.Q6J("ngForOf",o.grados)}}function I(i,d){if(1&i&&(e.TgZ(0,"div",6)(1,"div",12),e._UZ(2,"i",13),e._uU(3," Asignaci\xf3n "),e.qZA(),e.TgZ(4,"div",7)(5,"div",14)(6,"div",15),e._UZ(7,"img",16),e.qZA(),e.TgZ(8,"div",17)(9,"h4",18),e._uU(10),e.qZA(),e.TgZ(11,"h5",19),e._uU(12),e.qZA(),e.TgZ(13,"p",19),e._uU(14),e.qZA()()(),e.YNc(15,w,4,2,"ul",20),e.qZA()()),2&i){const o=e.oxw();e.xp6(7),e.Q6J("src",o.data.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",o.data.primer_apellido," ",o.data.segundo_apellido," "),e.xp6(2),e.AsE(" ",o.data.primer_nombre," ",o.data.segundo_nombre," "),e.xp6(2),e.hij(" ",o.data.email," "),e.xp6(1),e.Q6J("ngForOf",o.asignacion)}}const n=[{path:"",component:C},{path:"view/:id",component:(()=>{class i{constructor(o,a){this.route=o,this.crudService=a,this.success=!0,this.loading=!1,this.asignacion=[]}ngOnInit(){var o=this;return(0,g.Z)(function*(){o.loading=!0,o.id=o.route.snapshot.params.id,yield o.crudService.read("/secretaria/docentes/"+o.id).subscribe({next:a=>{o.data=a.user,a?.data&&(o.data.asignaciones=a.data,o.estructurar()),o.loading=!1},error:a=>{o.message="Error al cargar el curso : "+a,o.success=!1,o.loading=!1}})})()}estructurar(){this.data.asignaciones.forEach(o=>{let a=this.asignacion.find(p=>p.nombre===o.curso.lectivo.nivel.nombre);a||(a={nombre:o.curso.lectivo.nivel.nombre,grados:[]},this.asignacion.push(a));let c=a.grados.find(p=>p.nombre===o.curso.grado.nombre);c||(c={nombre:o.curso.grado.nombre,cursos:[]},a.grados.push(c));let f=c.cursos.find(p=>p.nombre===o.curso.nombre);f||(f={id:o.curso.id,nombre:o.curso.nombre,materias:[]},c.cursos.push(f)),f.materias.push(o.materia.nombre)})}static#e=this.\u0275fac=function(a){return new(a||i)(e.Y36(l.gz),e.Y36(_.I))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-secretaria-docentes-view"]],decls:9,vars:2,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/docentes"],["aria-current","page",1,"breadcrumb-item","active"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[1,"card-header","bg-transparent"],[1,"fa-brands","fa-wpforms","me-2"],[1,"d-flex","mb-0","pt-2","pb-0","border","bg-light"],[1,"flex-shrink-0"],["alt","","width","96",1,"ms-2","rounded-circle","me-1","border",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"],[1,"mb-0","text-secondary"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item","fw-bold","border","bg-secondary","bg-gradient","text-white","mt-1"],["class","list-group list-group-flush ms-2",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush","ms-2"],[1,"list-group-item","fw-bold"],["class","list-group list-group-flush ms-4",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush","ms-4"],[1,"list-group-item","fw-bold","bg-light","font-monospace"],[3,"routerLink"],[4,"ngFor","ngForOf"]],template:function(a,c){1&a&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Docentes"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Detalle"),e.qZA()()(),e.YNc(7,q,7,0,"div",5),e.YNc(8,I,16,7,"div",5)),2&a&&(e.xp6(7),e.Q6J("ngIf",c.loading),e.xp6(1),e.Q6J("ngIf",!c.loading))},dependencies:[t.sg,t.O5,l.rH,A.N]})}return i})()}];let u=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[l.Bz.forChild(n),l.Bz]})}return i})();var r=m(6208);let s=(()=>{class i{static#e=this.\u0275fac=function(a){return new(a||i)};static#t=this.\u0275mod=e.oAB({type:i});static#o=this.\u0275inj=e.cJS({imports:[t.ez,u,r.m]})}return i})()},4013:(Q,v,m)=>{m.d(v,{o:()=>S});var t=m(9468),l=m(95),g=m(6814),h=m(6688);const y=function(n,u){return{"alert-success":n,"alert-danger":u}};function e(n,u){if(1&n&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&n){const r=t.oxw();t.Q6J("ngClass",t.WLB(2,y,r.success,!r.success)),t.xp6(1),t.hij(" ",r.message,"\n")}}function _(n,u){1&n&&(t.TgZ(0,"div",5),t._UZ(1,"app-loading",6),t.TgZ(2,"h4",7),t._uU(3," Cargando... "),t.qZA()())}function b(n,u){1&n&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function x(n,u){if(1&n&&(t.TgZ(0,"label",20),t.YNc(1,b,2,0,"span",21),t._uU(2),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",r.required),t.xp6(1),t.hij(" ",r.displayName," ")}}function Z(n,u){if(1&n&&t._UZ(0,"input",22),2&n){const r=t.oxw().$implicit;let s;t.Q6J("name",r.key)("value",r.value)("required",null!==(s=r.required)&&void 0!==s&&s)}}function T(n,u){if(1&n&&t._UZ(0,"input",23),2&n){const r=t.oxw().$implicit;let s;t.s9C("type",r.type),t.Q6J("formControlName",r.key)("required",null!==(s=r.required)&&void 0!==s&&s)}}function C(n,u){if(1&n&&t._UZ(0,"input",24),2&n){const r=t.oxw().$implicit;let s;t.Q6J("formControlName",r.key)("required",null!==(s=r.required)&&void 0!==s&&s)}}function A(n,u){if(1&n&&t._UZ(0,"input",25),2&n){const r=t.oxw().$implicit;let s;t.Q6J("formControlName",r.key)("required",null!==(s=r.required)&&void 0!==s&&s)}}function q(n,u){if(1&n&&(t.TgZ(0,"option",28),t._uU(1),t.qZA()),2&n){const r=u.$implicit;t.Q6J("value",r.value),t.xp6(1),t.Oqu(r.displayValue)}}function N(n,u){if(1&n){const r=t.EpF();t.TgZ(0,"select",26),t.NdJ("change",function(i){t.CHM(r);const d=t.oxw().$implicit,o=t.oxw(2);return t.KtG(o.onSelectChange(i,d.key))}),t.YNc(1,q,2,2,"option",27),t.qZA()}if(2&n){const r=t.oxw().$implicit;t.Q6J("formControlName",r.key),t.xp6(1),t.Q6J("ngForOf",r.options)}}function F(n,u){if(1&n&&(t.TgZ(0,"div",29),t._uU(1),t.qZA()),2&n){const r=t.oxw().$implicit;t.xp6(1),t.hij(" ",r.displayName," es requerido. ")}}function D(n,u){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,x,3,2,"label",13),t.YNc(2,Z,1,3,"input",14),t.YNc(3,T,1,3,"input",15),t.YNc(4,C,1,2,"input",16),t.YNc(5,A,1,2,"input",17),t.YNc(6,N,2,2,"select",18),t.YNc(7,F,2,1,"div",19),t.qZA()),2&n){const r=u.$implicit,s=t.oxw(2);let i;t.xp6(1),t.Q6J("ngIf",r.displayName),t.xp6(1),t.Q6J("ngIf","hidden"===r.type),t.xp6(1),t.Q6J("ngIf","text"===r.type||"email"===r.type),t.xp6(1),t.Q6J("ngIf","number"===r.type),t.xp6(1),t.Q6J("ngIf","date"===r.type),t.xp6(1),t.Q6J("ngIf","select"===r.type),t.xp6(1),t.Q6J("ngIf",(null==(i=s.form.get(r.key))?null:i.invalid)&&(null==(i=s.form.get(r.key))?null:i.touched))}}function J(n,u){if(1&n&&(t.TgZ(0,"button",30),t._uU(1,"Actualizar"),t.qZA()),2&n){const r=t.oxw(2);t.Q6J("disabled",r.form.invalid)}}function w(n,u){if(1&n&&(t.TgZ(0,"button",31),t._uU(1,"Procesar"),t.qZA()),2&n){const r=t.oxw(2);t.Q6J("disabled",r.form.invalid)}}function I(n,u){if(1&n){const r=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(r);const i=t.oxw();return t.KtG(i.onSubmit())}),t.YNc(1,D,8,7,"div",9),t.YNc(2,J,2,1,"button",10),t.YNc(3,w,2,1,"button",11),t.qZA()}if(2&n){const r=t.oxw();t.Q6J("formGroup",r.form),t.xp6(1),t.Q6J("ngForOf",r.config.columns),t.xp6(1),t.Q6J("ngIf",r.entityData),t.xp6(1),t.Q6J("ngIf",!r.entityData)}}let S=(()=>{class n{constructor(r){this.fb=r,this.event=new t.vpe,this.success=!0,this.loading=!1}ngOnInit(){this.form=this.createGroup()}ngOnChanges(r){r.entityData&&r.entityData.previousValue!==r.entityData.currentValue&&(this.form=this.createGroup())}createGroup(){const r=this.fb.group({});return this.config&&this.config.columns&&this.config.columns.forEach(s=>{const i=this.entityData?this.entityData[s.key]:"";let d=s.required?[l.kI.required]:[];"email"===s.type&&d.push(l.kI.email);let o=this.fb.control(i,d);"date"===s.type&&o.setValue(i?new Date(i).toISOString().substring(0,10):""),r.addControl(s.key,o)}),r}onSubmit(){this.form.valid&&this.event.emit(this.form.value)}onSelectChange(r,s){const d=r.target.value;d&&this.config.columns.find(o=>o.key===s)?.changevalue&&this.event.emit({data:d})}static#e=this.\u0275fac=function(s){return new(s||n)(t.Y36(l.qu))};static#t=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-formulario"]],inputs:{config:"config",entityData:"entityData",message:"message",success:"success",loading:"loading"},outputs:{event:"event"},features:[t.TTD],decls:4,vars:3,consts:[["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"container","p-4"],["class","d-flex  justify-content-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[3,"formGroup","ngSubmit"],["class","form-group mb-2",4,"ngFor","ngForOf"],["type","submit","class","btn btn-success mt-2",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary mt-2",3,"disabled",4,"ngIf"],[1,"form-group","mb-2"],["class","text-secondary",4,"ngIf"],["type","hidden",3,"name","value","required",4,"ngIf"],["class","form-control",3,"type","formControlName","required",4,"ngIf"],["type","number","class","form-control","step","any",3,"formControlName","required",4,"ngIf"],["type","date","class","form-control",3,"formControlName","required",4,"ngIf"],["class","form-select",3,"formControlName","change",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-secondary"],[4,"ngIf"],["type","hidden",3,"name","value","required"],[1,"form-control",3,"type","formControlName","required"],["type","number","step","any",1,"form-control",3,"formControlName","required"],["type","date",1,"form-control",3,"formControlName","required"],[1,"form-select",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mt-2",3,"disabled"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"]],template:function(s,i){1&s&&(t.YNc(0,e,2,5,"div",0),t.TgZ(1,"div",1),t.YNc(2,_,4,0,"div",2),t.YNc(3,I,4,4,"form",3),t.qZA()),2&s&&(t.Q6J("ngIf",i.message),t.xp6(2),t.Q6J("ngIf",i.loading),t.xp6(1),t.Q6J("ngIf",i.form&&!i.loading))},dependencies:[g.mk,g.sg,g.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,h.N],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #0000001a}.alert[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;border-radius:4px;animation:_ngcontent-%COMP%_fadeAlert .5s}@keyframes _ngcontent-%COMP%_fadeAlert{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})}return n})()}}]);