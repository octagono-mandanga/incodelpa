"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[232],{3232:(b,f,i)=>{i.r(f),i.d(f,{RootAreasModule:()=>Z});var y=i(6814),u=i(4887),e=i(9468),n=i(932),p=i(5154);let g=(()=>{class r{constructor(t){this.crudService=t,this.data=[],this.success=!0,this.loading=!1,this.config={columns:[{key:"nivel.nombre",displayName:"Nivel"},{key:"nombre",displayName:"Nombre"},{key:"estado",displayName:"Estado"}],actions:{add:"/root/areas/add",edit:"/root/areas/edit/",delete:!0}}}ngOnInit(){this.loading=!0,this.crudService.read("/root/areas").subscribe({next:t=>{this.data=t,this.loading=!1},error:t=>{console.error("Error al obtener los areas:",t)}})}onBorrar(t){this.loading=!0,this.crudService.delete("/root/areas/"+t).subscribe({next:a=>{this.data=this.data.filter(s=>s.id!==t),this.message=a.message,this.success=!1,this.loading=!1},error:a=>{this.message="Error al actualizar "+a,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(n.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-root-areas"]],decls:5,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item","active"],[3,"data","loading","message","success","config","event"]],template:function(a,s){1&a&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),e._uU(3,"Areas"),e.qZA()()(),e.TgZ(4,"app-datatable",3),e.NdJ("event",function(o){return s.onBorrar(o)}),e.qZA()),2&a&&(e.xp6(4),e.Q6J("data",s.data)("loading",s.loading)("message",s.message)("success",s.success)("config",s.config))},dependencies:[p.n]})}return r})();var l=i(5861);class m{constructor(){}}var c=i(4036),d=i(4013);const N=[{path:"",component:g},{path:"add",component:(()=>{class r{constructor(t,a){this.crudNivelService=t,this.crudService=a,this.success=!0,this.loading=!1}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.config={columns:[{key:"nivel",displayName:"Nivel",required:!0,type:"select",options:[]},{key:"nombre",displayName:"Nombre",required:!0,type:"text"},{key:"obligatoriedad",displayName:"Obligatoriedad",type:"select",options:[{value:"obligatorio",displayValue:"Obligatorio"},{value:"optativo",displayValue:"Optativo"}],required:!0},{key:"estado",displayName:"Estado",type:"select",options:[{value:"activo",displayValue:"Activo"},{value:"inactivo",displayValue:"Inactivo"}],required:!0}],actions:{}};try{const s=(yield(0,c.z)(t.crudNivelService.read("/root/niveles"))).filter(o=>"activo"===o.estado).map(o=>({value:o.id.toString(),displayValue:o.nombre})),v=t.config.columns.find(o=>"nivel"===o.key);v&&(v.options=s)}catch(a){console.error("Error:",a)}})()}onAgregar(t){this.loading=!0,this.crudService.create(t,"/root/areas").subscribe({next:a=>{this.data=new m,this.message=a.message,this.success=!0,this.loading=!1},error:a=>{this.message="Error al crear el area : "+a,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(n.I),e.Y36(n.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-root-areas-add"]],decls:8,vars:4,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/root/areas"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","message","success","config","event"]],template:function(a,s){1&a&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Areas"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Nuevo"),e.qZA()()(),e.TgZ(7,"app-formulario",5),e.NdJ("event",function(o){return s.onAgregar(o)}),e.qZA()),2&a&&(e.xp6(7),e.Q6J("loading",s.loading)("message",s.message)("success",s.success)("config",s.config))},dependencies:[u.rH,d.o]})}return r})()},{path:"edit/:id",component:(()=>{class r{constructor(t,a,s){this.route=t,this.crudService=a,this.crudAreaService=s,this.success=!0,this.loading=!1}ngOnInit(){var t=this;return(0,l.Z)(function*(){t.id=t.route.snapshot.params.id,t.config={columns:[{key:"nivel",displayName:"Nivel",required:!0,type:"select",options:[]},{key:"nombre",displayName:"Nombre",required:!0,type:"text"},{key:"obligatoriedad",displayName:"Obligatoriedad",type:"select",options:[{value:"obligatorio",displayValue:"Obligatorio"},{value:"optativo",displayValue:"Optativo"}],required:!0},{key:"estado",displayName:"Estado",type:"select",options:[{value:"activo",displayValue:"Activo"},{value:"inactivo",displayValue:"Inactivo"}],required:!0}],actions:{}};try{t.loading=!0;const a=yield(0,c.z)(t.crudService.read("/root/niveles"));t.crudAreaService.read("/root/areas/"+t.id).subscribe({next:o=>{t.data=o.data,t.loading=!1},error:o=>{t.message="Error al cargar el area : "+o,t.success=!1,t.loading=!1}});const s=a.filter(o=>"activo"===o.estado).map(o=>({value:o.id.toString(),displayValue:o.nombre})),v=t.config.columns.find(o=>"nivel"===o.key);v&&(v.options=s)}catch(a){console.error("Error:",a)}})()}onEditar(t){this.loading=!0,this.crudAreaService.update(t,"/root/areas/"+this.id).subscribe({next:a=>{this.data=a.data,this.message=a.message,this.success=!0,this.loading=!1},error:a=>{this.loading=!1,this.message="Error al actualizar "+a,this.success=!1}}),setTimeout(()=>{this.message=""},5e3)}static#e=this.\u0275fac=function(a){return new(a||r)(e.Y36(u.gz),e.Y36(n.I),e.Y36(n.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-root-areas-edit"]],decls:8,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/root/areas"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","message","success","config","entityData","event"]],template:function(a,s){1&a&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Areas"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Nuevo"),e.qZA()()(),e.TgZ(7,"app-formulario",5),e.NdJ("event",function(o){return s.onEditar(o)}),e.qZA()),2&a&&(e.xp6(7),e.Q6J("loading",s.loading)("message",s.message)("success",s.success)("config",s.config)("entityData",s.data))},dependencies:[u.rH,d.o]})}return r})()}];let E=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.oAB({type:r});static#a=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(N),u.Bz]})}return r})();var T=i(6208);let Z=(()=>{class r{static#e=this.\u0275fac=function(a){return new(a||r)};static#t=this.\u0275mod=e.oAB({type:r});static#a=this.\u0275inj=e.cJS({imports:[y.ez,E,T.m]})}return r})()},4036:(b,f,i)=>{i.d(f,{z:()=>e});var y=i(6973),u=i(305);function e(n,p){const g="object"==typeof p;return new Promise((l,m)=>{const c=new u.Hp({next:d=>{l(d),c.unsubscribe()},error:m,complete:()=>{g?l(p.defaultValue):m(new y.K)}});n.subscribe(c)})}},5861:(b,f,i)=>{function y(e,n,p,g,l,m,c){try{var d=e[m](c),h=d.value}catch(A){return void p(A)}d.done?n(h):Promise.resolve(h).then(g,l)}function u(e){return function(){var n=this,p=arguments;return new Promise(function(g,l){var m=e.apply(n,p);function c(h){y(m,g,l,c,d,"next",h)}function d(h){y(m,g,l,c,d,"throw",h)}c(void 0)})}}i.d(f,{Z:()=>u})}}]);