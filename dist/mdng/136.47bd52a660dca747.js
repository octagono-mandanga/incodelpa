"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[136],{9136:(B,m,a)=>{a.r(m),a.d(m,{LogModule:()=>z});var g=a(6814),c=a(6985),s=a(95),h=a(2096),v=a(6306),e=a(9468),f=a(9692),d=a(6688);function _(t,i){1&t&&e._UZ(0,"app-loading",25)}function C(t,i){1&t&&(e.TgZ(0,"figure",26),e._UZ(1,"img",27),e.qZA())}const b=function(t,i){return{"alert-success":t,"alert-danger":i}};function Z(t,i){if(1&t&&(e.TgZ(0,"div",28),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.Q6J("ngClass",e.WLB(2,b,n.success,!n.success)),e.xp6(1),e.hij(" ",n.message," ")}}const x=function(){return["/recover"]};let T=(()=>{class t{constructor(n,o,r){this.formBuilder=n,this.authService=o,this.router=r,this.message="",this.loading=!1,this.success=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["gonzaloandreslucio@gmail.com",[s.kI.required,s.kI.email]],password:["123456",[s.kI.required]],active:[!1]})}get f(){return this.loginForm.controls}showMessage(n,o){this.message=n,this.success=o,this.loading=!1,setTimeout(()=>this.message="",8e3)}login(){this.loginForm.invalid?this.showMessage("Por favor, completa todos los campos correctamente.",!1):(this.loading=!0,this.authService.login(this.f.email.value,this.f.password.value,this.f.active.value).pipe((0,v.K)(n=>(this.showMessage(n.error.message||"No se pudo conectar con el servidor. Por favor, int\xe9ntalo m\xe1s tarde.",!1),(0,h.of)(null)))).subscribe(n=>{n&&(localStorage.setItem("token",n.token),localStorage.setItem("userId",n.user.id),this.showMessage("Inicio de sesi\xf3n exitoso",!0),this.authService.getUserRoles().subscribe({next:o=>{const r=o.roles;r[0]?this.router.navigate(["/"+r[0]]):console.log("123")},error:o=>{console.error("Error al obtener los roles del usuario",o)}})),this.loading=!1}))}recoverPassword(){this.f.email.value?(this.loading=!0,this.authService.recover(this.f.email.value).subscribe({next:()=>{this.showMessage("Se han enviado las instrucciones de recuperaci\xf3n a tu correo.",!0)},error:()=>{this.showMessage("Hubo un problema al enviar las instrucciones de recuperaci\xf3n. Por favor, intenta de nuevo m\xe1s tarde.",!1)}})):this.showMessage("Por favor, introduce tu email para recuperar tu contrase\xf1a.",!1)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(f.e),e.Y36(c.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:32,vars:7,consts:[[1,"wrap"],[1,"d-flex"],[1,"figure"],[1,"gradient"],[1,"form"],[3,"formGroup","ngSubmit"],[1,"d-flex","justify-content-center","py5-","my-5"],["size","100px",4,"ngIf"],["class","d-flex mb-5",4,"ngIf"],["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"form-floating","mb-3"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control","rounded-0"],["for","email"],[1,"form-floating","mb-4"],["type","password","id","password","formControlName","password","placeholder","Password",1,"form-control","rounded-0"],["for","password"],[1,"d-flex","justify-content-between","mb-3"],[1,"form-check"],["type","checkbox","formControlName","active","id","active",1,"form-check-input","border-dark"],["for","active",1,"form-check-label"],[1,"link-underline-light",3,"routerLink"],[1,"d-grid","gap-2","mb-4"],["type","submit",1,"btn","btn-primary","rounded-0",3,"disabled"],[1,"d-grid","gap-2","mb-3"],["type","button",1,"btn","btn-danger","rounded-0"],["size","100px"],[1,"d-flex","mb-5"],["src","./assets/images/logo.svg"],["role","alert",1,"alert",3,"ngClass"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return r.login()}),e.TgZ(6,"div",6),e.YNc(7,_,1,0,"app-loading",7),e.qZA(),e.YNc(8,C,2,0,"figure",8),e.YNc(9,Z,2,5,"div",9),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.TgZ(12,"label",12),e._uU(13,"Email address"),e.qZA()(),e.TgZ(14,"div",13),e._UZ(15,"input",14),e.TgZ(16,"label",15),e._uU(17,"Password"),e.qZA()(),e.TgZ(18,"div",16)(19,"div",17),e._UZ(20,"input",18),e.TgZ(21,"label",19),e._uU(22," Mantener activa "),e.qZA()(),e.TgZ(23,"p")(24,"a",20),e._uU(25,"Olvid\xe9 la Clave"),e.qZA()()(),e.TgZ(26,"div",21)(27,"button",22),e._uU(28,"Iniciar Sesi\xf3n"),e.qZA()(),e.TgZ(29,"div",23)(30,"button",24),e._uU(31,"Conectarse con Gmail"),e.qZA()()()()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",r.loginForm),e.xp6(2),e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.message),e.xp6(15),e.Q6J("routerLink",e.DdM(6,x)),e.xp6(3),e.Q6J("disabled",r.loading||!r.loginForm.valid))},dependencies:[g.mk,g.O5,c.rH,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.sg,s.u,d.N],styles:[".figure[_ngcontent-%COMP%]{background:url(/assets/images/belleza.jpg);width:35%;background-repeat:no-repeat;background-size:cover;background-position:right center}.figure[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(1,62,115,.9) 0%,rgba(9,9,121,.4) 36%,rgba(2,0,36,.3) 100%);height:100%}.form[_ngcontent-%COMP%]{background:#fafafa;padding:40px;height:100vh;display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{display:flex;justify-content:center}.form[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:256px}.form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%}@media screen and (min-width: 600px){.form[_ngcontent-%COMP%]{width:65%}}@media screen and (max-width: 599px){.form[_ngcontent-%COMP%]{width:100%}.figure[_ngcontent-%COMP%]{display:none}}circle[_ngcontent-%COMP%]{transition:fill .25s}"]})}return t})();var p=a(932);function M(t,i){1&t&&e._UZ(0,"app-loading",18)}function y(t,i){1&t&&(e.TgZ(0,"figure",19),e._UZ(1,"img",20),e.qZA())}const w=function(t,i){return{"alert-success":t,"alert-danger":i}};function P(t,i){if(1&t&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.Q6J("ngClass",e.WLB(2,w,n.success,!n.success)),e.xp6(1),e.hij(" ",n.message," ")}}const O=function(){return["/"]};let I=(()=>{class t{constructor(n,o,r,l){this.formBuilder=n,this.router=o,this.crudService=r,this.route=l,this.message="",this.loading=!1,this.success=!1}ngOnInit(){this.resetForm=this.formBuilder.group({email:["",[s.kI.required,s.kI.email]]}),this.id=this.route.snapshot.params.id}get f(){return this.resetForm.controls}reset(){this.loading=!0,this.crudService.create(this.resetForm.value,"/recover").subscribe({next:n=>{this.message=n.message,this.success=!0,this.loading=!1},error:n=>{this.message=n.message?n.message:"Error con el proceso. ("+n+")",this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}showMessage(n,o){this.message=n,this.success=o,this.loading=!1,setTimeout(()=>this.message="",8e3)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(c.F0),e.Y36(p.I),e.Y36(c.gz))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-recover"]],decls:23,vars:7,consts:[[1,"wrap"],[1,"d-flex"],[1,"figure"],[1,"gradient"],[1,"form"],[3,"formGroup","ngSubmit"],[1,"d-flex","justify-content-center","py5-","my-2"],["size","100px",4,"ngIf"],["class","d-flex mb-5",4,"ngIf"],["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"form-floating","mb-4"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control","rounded-0"],["for","email"],[1,"d-flex","justify-content-end","mb-3"],[1,"link-underline-light",3,"routerLink"],[1,"d-grid","gap-2","mb-4"],["type","submit",1,"btn","btn-dark","rounded-0",3,"disabled"],[1,"text-secondary","border-top","mt-3","py-3","px-1"],["size","100px"],[1,"d-flex","mb-5"],["src","./assets/images/logo.svg"],["role","alert",1,"alert",3,"ngClass"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return r.reset()}),e.TgZ(6,"div",6),e.YNc(7,M,1,0,"app-loading",7),e.qZA(),e.YNc(8,y,2,0,"figure",8),e.YNc(9,P,2,5,"div",9),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.TgZ(12,"label",12),e._uU(13,"Email address"),e.qZA()(),e.TgZ(14,"div",13)(15,"p")(16,"a",14),e._uU(17,"Regresar Login"),e.qZA()()(),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Olvide la Clave"),e.qZA()(),e.TgZ(21,"p",17),e._uU(22," Te enviaremos un enlace seguro para restablecer tu contrase\xf1a. Por favor, sigue las instrucciones en el correo para crear una nueva clave y recuperar el acceso a tu cuenta. "),e.qZA()()()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",r.resetForm),e.xp6(2),e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.message),e.xp6(7),e.Q6J("routerLink",e.DdM(6,O)),e.xp6(3),e.Q6J("disabled",r.loading||!r.resetForm.valid))},dependencies:[g.mk,g.O5,c.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.N],styles:[".figure[_ngcontent-%COMP%]{background:url(/assets/images/olvido.jpg);width:35%;background-repeat:no-repeat;background-size:cover;background-position:left center}.figure[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(1,62,115,.9) 0%,rgba(9,9,121,.4) 36%,rgba(2,0,36,.3) 100%);height:100%}.form[_ngcontent-%COMP%]{background:#fafafa;padding:40px;height:100vh;display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{display:flex;justify-content:center}.form[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:256px}.form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%}@media screen and (min-width: 600px){.form[_ngcontent-%COMP%]{width:65%}}@media screen and (max-width: 599px){.form[_ngcontent-%COMP%]{width:100%}.figure[_ngcontent-%COMP%]{display:none}}circle[_ngcontent-%COMP%]{transition:fill .25s}"]})}return t})();function k(t,i){1&t&&e._UZ(0,"app-loading",6)}function U(t,i){1&t&&(e.TgZ(0,"h1",7),e._uU(1,"Cerrando sesi\xf3n..."),e.qZA())}function J(t,i){1&t&&(e.TgZ(0,"div",8)(1,"span",9),e._uU(2,"Cargando..."),e.qZA()())}function F(t,i){1&t&&e._UZ(0,"app-loading",21)}function q(t,i){1&t&&(e.TgZ(0,"figure",22),e._UZ(1,"img",23),e.qZA())}const L=function(t,i){return{"alert-success":t,"alert-danger":i}};function S(t,i){if(1&t&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.Q6J("ngClass",e.WLB(2,L,n.success,!n.success)),e.xp6(1),e.hij(" ",n.message," ")}}const Y=function(){return["/"]},N=[{path:"",component:T},{path:"logout",component:(()=>{class t{constructor(n,o){this.authService=n,this.router=o,this.loading=!1}ngOnInit(){this.loading=!0,this.authService.logout().subscribe({next:n=>{this.loading=!1,localStorage.removeItem("token"),localStorage.removeItem("user"),this.router.navigate(["/"])},error:n=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.router.navigate(["/"]),console.error(n)}})}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(f.e),e.Y36(c.F0))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-logout"]],decls:7,vars:3,consts:[[1,"d-flex","justify-content-center","align-items-center","vh-100"],[1,"text-center"],["size","100px",4,"ngIf"],["class","display-4 fw-bold",4,"ngIf"],[1,"mt-3"],["class","spinner-border mt-5","role","status",4,"ngIf"],["size","100px"],[1,"display-4","fw-bold"],["role","status",1,"spinner-border","mt-5"],[1,"visually-hidden"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,k,1,0,"app-loading",2),e.YNc(3,U,2,0,"h1",3),e.TgZ(4,"p",4),e._uU(5,"Por favor, espera mientras te desconectamos."),e.qZA(),e.YNc(6,J,3,0,"div",5),e.qZA()()),2&o&&(e.xp6(2),e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading),e.xp6(3),e.Q6J("ngIf",r.loading))},dependencies:[g.O5,d.N]})}return t})()},{path:"recover",component:I},{path:"code/:id",component:(()=>{class t{constructor(n,o,r,l){this.formBuilder=n,this.router=o,this.crudService=r,this.route=l,this.message="",this.loading=!1,this.success=!1}ngOnInit(){this.recoverForm=this.formBuilder.group({code:[""],confirmar:["12345678",[s.kI.required,s.kI.minLength(8)]],password:["12345678",[s.kI.required,s.kI.minLength(8)]],email:["glucio@unipacifico.edu.co  ",[s.kI.required,s.kI.email]]});const n=this.mustMatch("password","confirmar");this.recoverForm.setValidators(n),this.recoverForm.updateValueAndValidity(),this.id=this.route.snapshot.params.id}get f(){return this.recoverForm.controls}showMessage(n,o){this.message=n,this.success=o,this.loading=!1,setTimeout(()=>this.message="",8e3)}onSubmit(){this.recoverForm.invalid?this.showMessage("Por favor, completa todos los campos correctamente.",!1):(this.loading=!0,this.recoverForm.patchValue({code:this.id}),this.crudService.create(this.recoverForm.value,"/code").subscribe({next:n=>{this.message=n.message,this.success=!0,this.loading=!1,this.router.navigate(["/"])},error:n=>{this.message="Error al crear el area : "+n,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3))}mustMatch(n,o){return r=>{if(!(r instanceof s.cw))return null;const l=r.get(n),u=r.get(o);return!l||!u||u.errors&&!u.errors.mustMatch||l.value===u.value?null:{mustMatch:!0}}}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(s.qu),e.Y36(c.F0),e.Y36(p.I),e.Y36(c.gz))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-code"]],decls:32,vars:7,consts:[[1,"wrap"],[1,"d-flex"],[1,"figure"],[1,"gradient"],[1,"form"],[3,"formGroup","ngSubmit"],[1,"d-flex","justify-content-center","py5-","my-2"],["size","100px",4,"ngIf"],["class","d-flex mb-5",4,"ngIf"],["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"form-floating","mb-4"],["type","email","id","email","formControlName","email","placeholder","Email",1,"form-control","rounded-0"],["for","email"],["type","password","id","password","formControlName","password","placeholder","Password",1,"form-control","rounded-0"],["for","password"],["type","password","id","confirmar","formControlName","confirmar","placeholder","Confirmar",1,"form-control","rounded-0"],[1,"d-flex","justify-content-end","mb-3"],[1,"link-underline-light",3,"routerLink"],[1,"d-grid","gap-2","mb-4"],["type","submit",1,"btn","btn-success","rounded-0",3,"disabled"],[1,"text-secondary","border-top","mt-3","py-3","px-1"],["size","100px"],[1,"d-flex","mb-5"],["src","./assets/images/logo.svg"],["role","alert",1,"alert",3,"ngClass"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.qZA(),e.TgZ(4,"div",4)(5,"form",5),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(6,"div",6),e.YNc(7,F,1,0,"app-loading",7),e.qZA(),e.YNc(8,q,2,0,"figure",8),e.YNc(9,S,2,5,"div",9),e.TgZ(10,"div",10),e._UZ(11,"input",11),e.TgZ(12,"label",12),e._uU(13,"Email address"),e.qZA()(),e.TgZ(14,"div",10),e._UZ(15,"input",13),e.TgZ(16,"label",14),e._uU(17,"Clave"),e.qZA()(),e.TgZ(18,"div",10),e._UZ(19,"input",15),e.TgZ(20,"label",12),e._uU(21,"Confirmar Clave"),e.qZA()(),e.TgZ(22,"div",16)(23,"p")(24,"a",17),e._uU(25,"Regresar Login"),e.qZA()()(),e.TgZ(26,"div",18)(27,"button",19),e._uU(28,"Cambiar Clave"),e.qZA()(),e.TgZ(29,"p",20)(30,"small"),e._uU(31," Genere una nueva clave que contenga al menos ocho caracteres. Recuerde que su clave debe ser de facil recordacion para usted pero no para terceros. La seguridad de su cuenta esta en sus manos. "),e.qZA()()()()()()),2&o&&(e.xp6(5),e.Q6J("formGroup",r.recoverForm),e.xp6(2),e.Q6J("ngIf",r.loading),e.xp6(1),e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.message),e.xp6(15),e.Q6J("routerLink",e.DdM(6,Y)),e.xp6(3),e.Q6J("disabled",r.loading||!r.recoverForm.valid))},dependencies:[g.mk,g.O5,c.rH,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.N],styles:[".figure[_ngcontent-%COMP%]{background:url(/assets/images/code.jpg);width:35%;background-repeat:no-repeat;background-size:cover;background-position:right center}.figure[_ngcontent-%COMP%]   .gradient[_ngcontent-%COMP%]{background:linear-gradient(0deg,rgba(1,62,115,.9) 0%,rgba(9,9,121,.4) 36%,rgba(2,0,36,.3) 100%);height:100%}.form[_ngcontent-%COMP%]{background:#fafafa;padding:40px;height:100vh;display:flex;align-items:center;justify-content:center}.form[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{display:flex;justify-content:center}.form[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:256px}.form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:90%}@media screen and (min-width: 600px){.form[_ngcontent-%COMP%]{width:65%}}@media screen and (max-width: 599px){.form[_ngcontent-%COMP%]{width:100%}.figure[_ngcontent-%COMP%]{display:none}}circle[_ngcontent-%COMP%]{transition:fill .25s}"]})}return t})()}];let j=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(N),c.Bz]})}return t})();var Q=a(6208);let z=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#n=this.\u0275inj=e.cJS({imports:[g.ez,j,s.UX,Q.m]})}return t})()}}]);