"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[300],{8300:(Q,_,m)=>{m.r(_),m.d(_,{SecretariaDocentesModule:()=>i});var e=m(6814),l=m(4887),f=m(5861),v=m(2451),h=m(4036),t=m(9468),g=m(932),y=m(4013),x=m(6299);const b=function(r){return["/secretaria/docentes/view",r]};function Z(r,s){if(1&r&&(t.TgZ(0,"li",17)(1,"div",18)(2,"div",19),t._UZ(3,"img",20),t.qZA(),t.TgZ(4,"div",21)(5,"h6",22),t._uU(6),t.qZA(),t.TgZ(7,"p",22),t._uU(8),t.qZA()()(),t._UZ(9,"div"),t.qZA()),2&r){const o=s.$implicit;t.Q6J("routerLink",t.VKq(6,b,o.id)),t.xp6(3),t.Q6J("src",o.avatar_url,t.LSH),t.xp6(3),t.AsE(" ",o.primer_nombre," ",o.segundo_nombre," "),t.xp6(2),t.AsE(" ",o.primer_apellido," ",o.segundo_apellido," ")}}let T=(()=>{class r{constructor(o,n,c,p){this.router=o,this.route=n,this.crudService=c,this.crudTipodocumentoService=p,this.success=!0,this.loading=!1,this.loading2=!1,this.data=new v.n,this.searchList=[],this.newList=[],this.tipoDoc=[]}ngOnInit(){var o=this;return(0,f.Z)(function*(){o.loading=!0,o.id=o.route.snapshot.params.id,o.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"}],actions:{}},o.tipoDoc=yield(0,h.z)(o.crudTipodocumentoService.read("/secretaria/tipo_documentos")),o.onResetForm(),o.crudService.read("/secretaria/docentes").subscribe({next:n=>{o.newList=n.data,o.success=!0,o.loading=!1,o.onResetForm()},error:n=>{o.message="Error al crear el docente : "+n,o.success=!1,o.loading=!1}})})()}onResetForm(){this.data=new v.n;const o=this.tipoDoc.filter(c=>"activo"===c.estado).map(c=>({value:c.id.toString(),displayValue:c.nombre})),n=this.config.columns.find(c=>"tipo_documento"===c.key);n&&(n.options=o)}onAgregar(o){this.loading=!0,this.crudService.create(o,"/secretaria/docentes").subscribe({next:n=>{this.message=n.message,this.success=!0,this.loading=!1,this.onResetForm()},error:n=>{this.message="Error al crear el docente : "+n,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}onEvent(o){var n=this;return(0,f.Z)(function*(){o.term?(n.loading2=!0,yield n.crudService.read("/secretaria/docentes/search/"+o.term).subscribe({next:c=>{n.searchList=c.data,n.loading2=!1},error:c=>{n.message="Error al cargar el docentes : "+c,n.success=!1,n.loading=!1}})):o.user&&n.router.navigate(["/secretaria/docentes/view/",o.user])})()}static#e=this.\u0275fac=function(n){return new(n||r)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(g.I),t.Y36(g.I))};static#t=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-secretaria-docentes"]],decls:19,vars:9,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],[1,"row"],[1,"col-5"],[3,"loading","message","success","config","entityData","event"],[1,"col-4"],[1,"card","mb-2"],[1,"card-body"],[3,"users","loading","placeholder","event"],[1,"card"],[1,"card-header","bg-transparent"],[1,"mb-0","py-1"],[1,"card-body","p-0"],[1,"list-group","list-group-flush"],["class","list-group-item pb-1 cursor",3,"routerLink",4,"ngFor","ngForOf"],[1,"col-3"],[1,"list-group-item","pb-1","cursor",3,"routerLink"],[1,"d-flex"],[1,"flex-shrink-0"],["alt","","width","40",1,"rounded-circle",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"]],template:function(n,c){1&n&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),t._uU(3,"Docentes"),t.qZA()()(),t.TgZ(4,"div",3)(5,"div",4)(6,"app-formulario",5),t.NdJ("event",function(d){return c.onAgregar(d)}),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"app-alumno-buscar",9),t.NdJ("event",function(d){return c.onEvent(d)}),t.qZA()()(),t.TgZ(11,"div",10)(12,"div",11)(13,"h6",12),t._uU(14,"\xdaltimos Docentes"),t.qZA()(),t.TgZ(15,"div",13)(16,"ul",14),t.YNc(17,Z,10,8,"li",15),t.qZA()()()(),t._UZ(18,"div",16),t.qZA()),2&n&&(t.xp6(6),t.Q6J("loading",c.loading)("message",c.message)("success",c.success)("config",c.config)("entityData",c.data),t.xp6(4),t.Q6J("users",c.searchList)("loading",c.loading2)("placeholder","Buscar Docentes"),t.xp6(7),t.Q6J("ngForOf",c.newList))},dependencies:[e.sg,l.rH,y.o,x.i]})}return r})();var C=m(6688);function q(r,s){1&r&&(t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),t._UZ(4,"app-loading",10),t.TgZ(5,"h4",11),t._uU(6," Cargando... "),t.qZA()()()()())}function N(r,s){if(1&r&&(t.TgZ(0,"ul")(1,"li"),t._uU(2),t.qZA()()),2&r){const o=s.$implicit;t.xp6(2),t.Oqu(o)}}const A=function(r){return["/secretaria/cursos/view",r]};function F(r,s){if(1&r&&(t.TgZ(0,"ul",27)(1,"li",28)(2,"a",29),t._uU(3),t.qZA()(),t.YNc(4,N,3,1,"ul",30),t.qZA()),2&r){const o=s.$implicit;t.xp6(2),t.Q6J("routerLink",t.VKq(3,A,o.id)),t.xp6(1),t.hij(" Curso: ",o.nombre," "),t.xp6(1),t.Q6J("ngForOf",o.materias)}}function J(r,s){if(1&r&&(t.TgZ(0,"ul",24)(1,"li",25),t._uU(2),t.qZA(),t.YNc(3,F,5,5,"ul",26),t.qZA()),2&r){const o=s.$implicit;t.xp6(2),t.Oqu(o.nombre),t.xp6(1),t.Q6J("ngForOf",o.cursos)}}function D(r,s){if(1&r&&(t.TgZ(0,"ul",21)(1,"li",22),t._uU(2),t.qZA(),t.YNc(3,J,4,2,"ul",23),t.qZA()),2&r){const o=s.$implicit;t.xp6(2),t.hij(" ",o.nombre,""),t.xp6(1),t.Q6J("ngForOf",o.grados)}}function w(r,s){if(1&r&&(t.TgZ(0,"div",6)(1,"div",12),t._UZ(2,"i",13),t._uU(3," Asignaci\xf3n "),t.qZA(),t.TgZ(4,"div",7)(5,"div",14)(6,"div",15),t._UZ(7,"img",16),t.qZA(),t.TgZ(8,"div",17)(9,"h4",18),t._uU(10),t.qZA(),t.TgZ(11,"h5",19),t._uU(12),t.qZA(),t.TgZ(13,"p",19),t._uU(14),t.qZA()()(),t.YNc(15,D,4,2,"ul",20),t.qZA()()),2&r){const o=t.oxw();t.xp6(7),t.Q6J("src",o.data.avatar_url,t.LSH),t.xp6(3),t.AsE(" ",o.data.primer_apellido," ",o.data.segundo_apellido," "),t.xp6(2),t.AsE(" ",o.data.primer_nombre," ",o.data.segundo_nombre," "),t.xp6(2),t.hij(" ",o.data.email," "),t.xp6(1),t.Q6J("ngForOf",o.asignacion)}}const I=[{path:"",component:T},{path:"view/:id",component:(()=>{class r{constructor(o,n){this.route=o,this.crudService=n,this.success=!0,this.loading=!1,this.asignacion=[]}ngOnInit(){var o=this;return(0,f.Z)(function*(){o.loading=!0,o.id=o.route.snapshot.params.id,yield o.crudService.read("/secretaria/docentes/"+o.id).subscribe({next:n=>{o.data=n.user,n?.data&&(o.data.asignaciones=n.data,o.estructurar()),o.loading=!1},error:n=>{o.message="Error al cargar el curso : "+n,o.success=!1,o.loading=!1}})})()}estructurar(){this.data.asignaciones.forEach(o=>{let n=this.asignacion.find(d=>d.nombre===o.curso.lectivo.nivel.nombre);n||(n={nombre:o.curso.lectivo.nivel.nombre,grados:[]},this.asignacion.push(n));let c=n.grados.find(d=>d.nombre===o.curso.grado.nombre);c||(c={nombre:o.curso.grado.nombre,cursos:[]},n.grados.push(c));let p=c.cursos.find(d=>d.nombre===o.curso.nombre);p||(p={id:o.curso.id,nombre:o.curso.nombre,materias:[]},c.cursos.push(p)),p.materias.push(o.materia.nombre)})}static#e=this.\u0275fac=function(n){return new(n||r)(t.Y36(l.gz),t.Y36(g.I))};static#t=this.\u0275cmp=t.Xpm({type:r,selectors:[["app-secretaria-docentes-view"]],decls:9,vars:2,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/docentes"],["aria-current","page",1,"breadcrumb-item","active"],["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[1,"card-header","bg-transparent"],[1,"fa-brands","fa-wpforms","me-2"],[1,"d-flex","mb-0","pt-2","pb-0","border","bg-light"],[1,"flex-shrink-0"],["alt","","width","96",1,"ms-2","rounded-circle","me-1","border",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"],[1,"mb-0","text-secondary"],["class","list-group list-group-flush",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush"],[1,"list-group-item","fw-bold","border","bg-secondary","bg-gradient","text-white","mt-1"],["class","list-group list-group-flush ms-2",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush","ms-2"],[1,"list-group-item","fw-bold"],["class","list-group list-group-flush ms-4",4,"ngFor","ngForOf"],[1,"list-group","list-group-flush","ms-4"],[1,"list-group-item","fw-bold","bg-light","font-monospace"],[3,"routerLink"],[4,"ngFor","ngForOf"]],template:function(n,c){1&n&&(t.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),t._uU(4,"Docentes"),t.qZA()(),t.TgZ(5,"li",4),t._uU(6,"Detalle"),t.qZA()()(),t.YNc(7,q,7,0,"div",5),t.YNc(8,w,16,7,"div",5)),2&n&&(t.xp6(7),t.Q6J("ngIf",c.loading),t.xp6(1),t.Q6J("ngIf",!c.loading))},dependencies:[e.sg,e.O5,l.rH,C.N]})}return r})()}];let a=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(I),l.Bz]})}return r})();var u=m(6208);let i=(()=>{class r{static#e=this.\u0275fac=function(n){return new(n||r)};static#t=this.\u0275mod=t.oAB({type:r});static#o=this.\u0275inj=t.cJS({imports:[e.ez,a,u.m]})}return r})()},4013:(Q,_,m)=>{m.d(_,{o:()=>I});var e=m(9468),l=m(95),f=m(6814),v=m(6688);const h=function(a,u){return{"alert-success":a,"alert-danger":u}};function t(a,u){if(1&a&&(e.TgZ(0,"div",4),e._uU(1),e.qZA()),2&a){const i=e.oxw();e.Q6J("ngClass",e.WLB(2,h,i.success,!i.success)),e.xp6(1),e.hij(" ",i.message,"\n")}}function g(a,u){if(1&a&&(e.TgZ(0,"div",5),e._UZ(1,"app-loading",6),e.TgZ(2,"h4",7),e._uU(3),e.qZA()()),2&a){const i=e.oxw();e.xp6(3),e.hij(" Cargando ",i.msg,"... ")}}function y(a,u){1&a&&(e.TgZ(0,"span"),e._uU(1,"*"),e.qZA())}function x(a,u){if(1&a&&(e.TgZ(0,"label",21),e.YNc(1,y,2,0,"span",22),e._uU(2),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.required),e.xp6(1),e.hij(" ",i.displayName," ")}}function b(a,u){if(1&a&&e._UZ(0,"input",23),2&a){const i=e.oxw().$implicit;let r;e.Q6J("name",i.key)("value",i.value)("required",null!==(r=i.required)&&void 0!==r&&r)}}function Z(a,u){if(1&a&&e._UZ(0,"input",24),2&a){const i=e.oxw().$implicit;let r;e.s9C("type",i.type),e.Q6J("formControlName",i.key)("required",null!==(r=i.required)&&void 0!==r&&r)}}function T(a,u){if(1&a&&e._UZ(0,"input",25),2&a){const i=e.oxw().$implicit;let r;e.Q6J("formControlName",i.key)("required",null!==(r=i.required)&&void 0!==r&&r)}}function C(a,u){if(1&a&&e._UZ(0,"textarea",26),2&a){const i=e.oxw().$implicit;let r;e.Q6J("formControlName",i.key)("required",null!==(r=i.required)&&void 0!==r&&r)}}function q(a,u){if(1&a&&e._UZ(0,"input",27),2&a){const i=e.oxw().$implicit;let r;e.Q6J("formControlName",i.key)("required",null!==(r=i.required)&&void 0!==r&&r)}}function N(a,u){if(1&a&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&a){const i=u.$implicit;e.Q6J("value",i.value),e.xp6(1),e.Oqu(i.displayValue)}}function A(a,u){if(1&a){const i=e.EpF();e.TgZ(0,"select",28),e.NdJ("change",function(s){e.CHM(i);const o=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.onSelectChange(s,o.key))}),e.YNc(1,N,2,2,"option",29),e.qZA()}if(2&a){const i=e.oxw().$implicit;e.Q6J("formControlName",i.key),e.xp6(1),e.Q6J("ngForOf",i.options)}}function F(a,u){if(1&a&&(e.TgZ(0,"div",31),e._uU(1),e.qZA()),2&a){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",i.displayName," es requerido. ")}}function J(a,u){if(1&a&&(e.TgZ(0,"div",12),e.YNc(1,x,3,2,"label",13),e.YNc(2,b,1,3,"input",14),e.YNc(3,Z,1,3,"input",15),e.YNc(4,T,1,2,"input",16),e.YNc(5,C,1,2,"textarea",17),e.YNc(6,q,1,2,"input",18),e.YNc(7,A,2,2,"select",19),e.YNc(8,F,2,1,"div",20),e.qZA()),2&a){const i=u.$implicit,r=e.oxw(2);let s;e.xp6(1),e.Q6J("ngIf",i.displayName),e.xp6(1),e.Q6J("ngIf","hidden"===i.type),e.xp6(1),e.Q6J("ngIf","text"===i.type||"email"===i.type),e.xp6(1),e.Q6J("ngIf","number"===i.type),e.xp6(1),e.Q6J("ngIf","textarea"===i.type),e.xp6(1),e.Q6J("ngIf","date"===i.type),e.xp6(1),e.Q6J("ngIf","select"===i.type),e.xp6(1),e.Q6J("ngIf",(null==(s=r.form.get(i.key))?null:s.invalid)&&(null==(s=r.form.get(i.key))?null:s.touched))}}function D(a,u){if(1&a&&(e.TgZ(0,"button",32),e._uU(1,"Actualizar"),e.qZA()),2&a){const i=e.oxw(2);e.Q6J("disabled",i.form.invalid)}}function w(a,u){if(1&a&&(e.TgZ(0,"button",33),e._uU(1,"Procesar"),e.qZA()),2&a){const i=e.oxw(2);e.Q6J("disabled",i.form.invalid)}}function S(a,u){if(1&a){const i=e.EpF();e.TgZ(0,"form",8),e.NdJ("ngSubmit",function(){e.CHM(i);const s=e.oxw();return e.KtG(s.onSubmit())}),e.YNc(1,J,9,8,"div",9),e.YNc(2,D,2,1,"button",10),e.YNc(3,w,2,1,"button",11),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngForOf",i.config.columns),e.xp6(1),e.Q6J("ngIf",i.entityData),e.xp6(1),e.Q6J("ngIf",!i.entityData)}}let I=(()=>{class a{constructor(i){this.fb=i,this.event=new e.vpe,this.success=!0,this.loading=!1}ngOnInit(){this.form=this.createGroup()}ngOnChanges(i){i.entityData&&i.entityData.previousValue!==i.entityData.currentValue&&(this.form=this.createGroup())}createGroup(){const i=this.fb.group({});return this.config&&this.config.columns&&this.config.columns.forEach(r=>{const s=this.entityData?this.entityData[r.key]:"";let o=r.required?[l.kI.required]:[];"email"===r.type&&o.push(l.kI.email);let n=this.fb.control(s,o);"date"===r.type&&n.setValue(s?new Date(s).toISOString().substring(0,10):""),i.addControl(r.key,n)}),i}onSubmit(){this.form.valid&&this.event.emit(this.form.value)}onSelectChange(i,r){const o=i.target.value;o&&this.config.columns.find(n=>n.key===r)?.changevalue&&this.event.emit({data:o})}static#e=this.\u0275fac=function(r){return new(r||a)(e.Y36(l.qu))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-formulario"]],inputs:{config:"config",entityData:"entityData",message:"message",msg:"msg",success:"success",loading:"loading"},outputs:{event:"event"},features:[e.TTD],decls:4,vars:3,consts:[["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"container","p-4"],["class","d-flex  justify-content-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[3,"formGroup","ngSubmit"],["class","form-group mb-2",4,"ngFor","ngForOf"],["type","submit","class","btn btn-success mt-2",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary mt-2",3,"disabled",4,"ngIf"],[1,"form-group","mb-2"],["class","text-secondary",4,"ngIf"],["type","hidden",3,"name","value","required",4,"ngIf"],["class","form-control",3,"type","formControlName","required",4,"ngIf"],["type","number","class","form-control","step","any",3,"formControlName","required",4,"ngIf"],["class","form-control","rows","3",3,"formControlName","required",4,"ngIf"],["type","date","class","form-control",3,"formControlName","required",4,"ngIf"],["class","form-select",3,"formControlName","change",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-secondary"],[4,"ngIf"],["type","hidden",3,"name","value","required"],[1,"form-control",3,"type","formControlName","required"],["type","number","step","any",1,"form-control",3,"formControlName","required"],["rows","3",1,"form-control",3,"formControlName","required"],["type","date",1,"form-control",3,"formControlName","required"],[1,"form-select",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mt-2",3,"disabled"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"]],template:function(r,s){1&r&&(e.YNc(0,t,2,5,"div",0),e.TgZ(1,"div",1),e.YNc(2,g,4,1,"div",2),e.YNc(3,S,4,4,"form",3),e.qZA()),2&r&&(e.Q6J("ngIf",s.message),e.xp6(2),e.Q6J("ngIf",s.loading),e.xp6(1),e.Q6J("ngIf",s.form&&!s.loading))},dependencies:[f.mk,f.sg,f.O5,l._Y,l.YN,l.Kr,l.Fj,l.wV,l.EJ,l.JJ,l.JL,l.Q7,l.sg,l.u,v.N],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #0000001a}.alert[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;border-radius:4px;animation:_ngcontent-%COMP%_fadeAlert .5s}@keyframes _ngcontent-%COMP%_fadeAlert{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})}return a})()}}]);