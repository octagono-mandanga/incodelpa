"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[835],{7835:(b,y,n)=>{n.r(y),n.d(y,{RootMateriasModule:()=>S});var v=n(6814),m=n(6985),a=n(9468),c=n(932),g=n(5154);let h=(()=>{class o{constructor(e){this.crudService=e,this.data=[],this.success=!0,this.loading=!1,this.config={columns:[{key:"grado.nombre",displayName:"Grado"},{key:"area.nombre",displayName:"Area"},{key:"nombre",displayName:"Nombre"},{key:"ih",displayName:"IH"},{key:"porcentaje",displayName:"%"},{key:"estado",displayName:"Estado"}],actions:{add:"/root/materias/add",edit:"/root/materias/edit/",delete:!0}}}ngOnInit(){this.loading=!0,this.crudService.read("/root/materias").subscribe({next:e=>{this.data=e,this.loading=!1},error:e=>{console.error("Error al obtener los areas:",e)}})}onBorrar(e){this.loading=!0,this.crudService.delete("/root/materias/"+e).subscribe({next:t=>{this.data=this.data.filter(r=>r.id!==e),this.message=t.message,this.success=!1,this.loading=!1},error:t=>{this.message="Error al actualizar "+t,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#e=this.\u0275fac=function(t){return new(t||o)(a.Y36(c.I))};static#a=this.\u0275cmp=a.Xpm({type:o,selectors:[["app-root-materias"]],decls:5,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item","active"],[3,"data","loading","message","success","config","event"]],template:function(t,r){1&t&&(a.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),a._uU(3,"Materias"),a.qZA()()(),a.TgZ(4,"app-datatable",3),a.NdJ("event",function(i){return r.onBorrar(i)}),a.qZA()),2&t&&(a.xp6(4),a.Q6J("data",r.data)("loading",r.loading)("message",r.message)("success",r.success)("config",r.config))},dependencies:[g.n]})}return o})();var u=n(5861);class p{constructor(){}}var d=n(4036),l=n(4013);const E=[{path:"",component:h},{path:"add",component:(()=>{class o{constructor(e,t,r){this.crudService=e,this.crudAreaService=t,this.crudGradoService=r,this.success=!0,this.loading=!1,this.areas=[],this.grados=[]}ngOnInit(){var e=this;return(0,u.Z)(function*(){e.config={columns:[{key:"area",displayName:"Area",required:!0,type:"select",options:[],changevalue:!0},{key:"grado",displayName:"Grado",required:!0,type:"select",options:[]},{key:"nombre",displayName:"Nombre",required:!0,type:"text"},{key:"ih",displayName:"Intensidad Horaria",required:!0,type:"number"},{key:"porcentaje",displayName:"Porcentaje",required:!0,type:"number"},{key:"estado",displayName:"Estado",type:"select",options:[{value:"activo",displayValue:"Activo"},{value:"inactivo",displayValue:"Inactivo"}],required:!0}],actions:{}};try{e.areas=yield(0,d.z)(e.crudAreaService.read("/root/areas"));const t=e.areas.filter(s=>"activo"===s.estado).map(s=>({value:s.id.toString(),displayValue:s.nombre})),r=e.config.columns.find(s=>"area"===s.key);r&&(r.options=t),e.grados=yield(0,d.z)(e.crudGradoService.read("/root/grados"))}catch(t){console.error("Error:",t)}})()}cargarGrado(e){const t=this.areas.find(i=>i.id===e.data),r=this.grados.filter(i=>"activo"===i.estado&&i.nivel.id===t?.nivel.id).map(i=>({value:i.id.toString(),displayValue:i.nombre})),s=this.config.columns.find(i=>"grado"===i.key);s&&(s.options=r)}onAgregar(e){this.loading=!0,this.crudService.create(e,"/root/materias").subscribe({next:t=>{this.data=new p,this.message=t.message,this.success=!0,this.loading=!1},error:t=>{this.message="Error al crear el area : "+t,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}onEvento(e){"string"!=typeof e.data?this.onAgregar(e):("string"==typeof e.data||"number"==typeof e.data)&&this.cargarGrado(e)}static#e=this.\u0275fac=function(t){return new(t||o)(a.Y36(c.I),a.Y36(c.I),a.Y36(c.I))};static#a=this.\u0275cmp=a.Xpm({type:o,selectors:[["app-root-materias-add"]],decls:8,vars:4,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/root/materias"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","message","success","config","event"]],template:function(t,r){1&t&&(a.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),a._uU(4,"Materias"),a.qZA()(),a.TgZ(5,"li",4),a._uU(6,"Nuevo"),a.qZA()()(),a.TgZ(7,"app-formulario",5),a.NdJ("event",function(i){return r.onEvento(i)}),a.qZA()),2&t&&(a.xp6(7),a.Q6J("loading",r.loading)("message",r.message)("success",r.success)("config",r.config))},dependencies:[m.rH,l.o]})}return o})()},{path:"edit/:id",component:(()=>{class o{constructor(e,t,r,s){this.crudService=e,this.crudAreaService=t,this.crudGradoService=r,this.route=s,this.success=!0,this.loading=!1,this.areas=[],this.grados=[]}ngOnInit(){var e=this;return(0,u.Z)(function*(){e.id=e.route.snapshot.params.id,e.config={columns:[{key:"area",displayName:"Area",required:!0,type:"select",options:[],changevalue:!0},{key:"grado",displayName:"Grado",required:!0,type:"select",options:[]},{key:"nombre",displayName:"Nombre",required:!0,type:"text"},{key:"ih",displayName:"Intensidad",required:!0,type:"number"},{key:"porcentaje",displayName:"Porcentaje",required:!0,type:"number"},{key:"estado",displayName:"Estado",type:"select",options:[{value:"activo",displayValue:"Activo"},{value:"inactivo",displayValue:"Inactivo"}],required:!0}],actions:{}};try{e.loading=!0,e.areas=yield(0,d.z)(e.crudAreaService.read("/root/areas"));const t=e.areas.filter(s=>"activo"===s.estado).map(s=>({value:s.id.toString(),displayValue:s.nombre})),r=e.config.columns.find(s=>"area"===s.key);r&&(r.options=t),e.grados=yield(0,d.z)(e.crudGradoService.read("/root/grados")),e.crudAreaService.read("/root/materias/"+e.id).subscribe({next:s=>{e.data=s.data,e.data.area=e.data.area.id,e.data.grado=e.data.grado.id,e.cargarGrado({data:e.data.area}),e.loading=!1},error:s=>{e.message="Error al crear al cargar : "+s,e.success=!1,e.loading=!1}})}catch(t){console.error("Error:",t)}})()}cargarGrado(e){const t=this.areas.find(i=>i.id===e.data),r=this.grados.filter(i=>"activo"===i.estado&&i.nivel.id===t?.nivel.id).map(i=>({value:i.id.toString(),displayValue:i.nombre})),s=this.config.columns.find(i=>"grado"===i.key);s&&(s.options=r)}onActualizar(e){this.loading=!0,this.crudService.update(e,"/root/materias/"+this.id).subscribe({next:t=>{this.message=t.message,this.success=!0,this.loading=!1},error:t=>{this.message="Error al crear el area : "+t,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}onEvento(e){"string"!=typeof e.data?this.onActualizar(e):("string"==typeof e.data||"number"==typeof e.data)&&this.cargarGrado(e)}static#e=this.\u0275fac=function(t){return new(t||o)(a.Y36(c.I),a.Y36(c.I),a.Y36(c.I),a.Y36(m.gz))};static#a=this.\u0275cmp=a.Xpm({type:o,selectors:[["app-root-materias-edit"]],decls:8,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/root/materias"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","message","success","config","entityData","event"]],template:function(t,r){1&t&&(a.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),a._uU(4,"Materias"),a.qZA()(),a.TgZ(5,"li",4),a._uU(6,"Nuevo"),a.qZA()()(),a.TgZ(7,"app-formulario",5),a.NdJ("event",function(i){return r.onEvento(i)}),a.qZA()),2&t&&(a.xp6(7),a.Q6J("loading",r.loading)("message",r.message)("success",r.success)("config",r.config)("entityData",r.data))},dependencies:[m.rH,l.o]})}return o})()}];let N=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#a=this.\u0275mod=a.oAB({type:o});static#t=this.\u0275inj=a.cJS({imports:[m.Bz.forChild(E),m.Bz]})}return o})();var M=n(6208);let S=(()=>{class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#a=this.\u0275mod=a.oAB({type:o});static#t=this.\u0275inj=a.cJS({imports:[v.ez,N,M.m]})}return o})()},4036:(b,y,n)=>{n.d(y,{z:()=>a});var v=n(6973),m=n(305);function a(c,g){const h="object"==typeof g;return new Promise((u,p)=>{const d=new m.Hp({next:l=>{u(l),d.unsubscribe()},error:p,complete:()=>{h?u(g.defaultValue):p(new v.K)}});c.subscribe(d)})}},5861:(b,y,n)=>{function v(a,c,g,h,u,p,d){try{var l=a[p](d),f=l.value}catch(A){return void g(A)}l.done?c(f):Promise.resolve(f).then(h,u)}function m(a){return function(){var c=this,g=arguments;return new Promise(function(h,u){var p=a.apply(c,g);function d(f){v(p,h,u,d,l,"next",f)}function l(f){v(p,h,u,d,l,"throw",f)}d(void 0)})}}n.d(y,{Z:()=>m})}}]);