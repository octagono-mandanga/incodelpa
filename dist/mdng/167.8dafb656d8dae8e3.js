"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[167],{3167:(Ye,v,c)=>{c.r(v),c.d(v,{SecretariaCursosModule:()=>Qe});var l=c(6814),p=c(4887),d=c(5861),f=c(4036),S=c(3445),q=c(3630),u=c(7672),m=c(7069),b=c(6236),e=c(9468),g=c(932),U=c(5154),k=c(8670);function M(r,n){if(1&r&&e._UZ(0,"app-load-document",17),2&r){const t=e.oxw(2);e.Q6J("generatepdfMsg",t.generatepdfMsg)}}function N(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"button",10),e._uU(5,"Documentos"),e.qZA(),e.TgZ(6,"ul",11)(7,"li")(8,"h6",12),e._UZ(9,"i",13),e._uU(10," PDF "),e.qZA()(),e.TgZ(11,"li")(12,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(10))}),e._uU(13,"Listados de Asistencia"),e.qZA()(),e.TgZ(14,"li")(15,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(1))}),e._uU(16,"Listados Simples"),e.qZA()(),e.TgZ(17,"li")(18,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(2))}),e._uU(19,"Listados por Asignatura"),e.qZA()(),e.TgZ(20,"li")(21,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(3))}),e._uU(22,"Listados con Notas"),e.qZA()(),e.TgZ(23,"li"),e._UZ(24,"hr",15),e.qZA(),e.TgZ(25,"li")(26,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(4))}),e._uU(27,"Boletines"),e.qZA()(),e.TgZ(28,"li")(29,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(3))}),e._uU(30,"Consolidado"),e.qZA()(),e.TgZ(31,"li")(32,"a",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(3))}),e._uU(33,"Certificados"),e.qZA()()()(),e.YNc(34,M,1,1,"app-load-document",16),e.qZA()()()}if(2&r){const t=e.oxw();e.xp6(34),e.Q6J("ngIf",t.generatepdf)}}function J(r,n){1&r&&(e.TgZ(0,"div",18)(1,"div",19)(2,"div",20)(3,"strong"),e._uU(4,"Sin Cursos registrados."),e.qZA(),e._uU(5," No es posible gestionar cursos. Por favor, comun\xedquese con coordinaci\xf3n. "),e.qZA()()())}m.vfs=b.I.vfs;let I=(()=>{class r{constructor(t,i,a){this.crudService=t,this.crudAsignacionService=i,this.crudMatriculaService=a,this.data=[],this.success=!0,this.loading=!1,this.generatepdf=!1,this.docDefinition=u.U,this.periodos=[],this.escalas=[],this.asignaciones=[],this.disponibles=[],this.matriculados=[],this.notas=[],this.listados=[],this.boletines=[],this.config={columns:[{key:"nombre",displayName:"Curso"},{key:"lectivo.nivel.nombre",displayName:"Nivel"},{key:"grado.nombre",displayName:"Grado"},{key:"director.primer_nombre",displayName:"Director"},{key:"director.primer_apellido",displayName:""},{key:"sede.nombre",displayName:"Sede"},{key:"estado",displayName:"Estado"}],actions:{view:"/secretaria/cursos/view/"}}}ngOnInit(){this.loading=!0,this.crudService.read("/secretaria/cursos").subscribe({next:t=>{this.data=t,this.loading=!1},error:t=>{console.error("Error al obtener los areas:",t)}})}onBorrar(t){this.loading=!0,this.crudService.delete("/secretaria/cursos/"+t).subscribe({next:i=>{this.data=this.data.filter(a=>a.id!==t),this.message=i.message,this.success=!1,this.loading=!1},error:i=>{this.message="Error al actualizar "+i,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}onPdf(t){var i=this;return(0,d.Z)(function*(){i.generatepdfMsg=void 0;const a=[];switch(t){case 1:i.generatepdf=!0,i.docDefinition=new u.U,i.data.forEach(o=>{a.push({curso:o,matriculados:o.matriculas})}),i.docDefinition.listadoTodosCursos(a).then(()=>{m.createPdf(i.docDefinition.def).download("Listados.pdf",()=>{i.generatepdf=!1})});break;case 2:i.generatepdf=!0,i.docDefinition=new u.U,i.docDefinition.cursosAsignaciones(i.data).then(()=>{m.createPdf(i.docDefinition.def).download("Listados_asignacion.pdf",()=>{i.generatepdf=!1})});break;case 3:i.generatepdf=!0,i.generatepdfMsg="Iniciando Proceso ...",i.docDefinition=new u.U;try{yield i.onLoadListados(),i.generatepdfMsg="Generando Listados ...",i.docDefinition.listadoGeneralNotas(i.listados).then(()=>{m.createPdf(i.docDefinition.def).download("ListadosConNotas.pdf",()=>{i.generatepdf=!1})})}catch(o){i.generatepdf=!1,i.generatepdfMsg="Iniciando Proceso ..."+o}break;case 4:i.generatepdf=!0,i.generatepdfMsg="Iniciando Proceso ...",i.docDefinition=new u.U;try{yield i.onLoadBoletines(),i.generatepdfMsg="Generando Boletines ...",i.docDefinition.boletinCurso(i.boletines).then(()=>{m.createPdf(i.docDefinition.def).download("Boletin_Generales.pdf",()=>{i.generatepdf=!1})})}catch(o){console.log("Error al generar boletines: ",o),i.generatepdfMsg="Iniciando Proceso ..."+o}break;case 10:i.generatepdf=!0,i.docDefinition=new u.U,i.generatepdfMsg="Iniciando Proceso ...",i.data.forEach(o=>{a.push({curso:o,matriculados:o.matriculas})}),i.docDefinition.listadoTodosCursosAsistencia(a).then(()=>{m.createPdf(i.docDefinition.def).download("ListadosAsistencia.pdf",()=>{i.generatepdf=!1})})}})()}onLoadListados(){var t=this;return(0,d.Z)(function*(){for(const i of t.data){t.generatepdfMsg=`Cargando Notas de  ${i.grado.nombre} (${i.nombre})...`;try{const a=yield(0,f.z)(t.crudAsignacionService.read(`/secretaria/asignaciones/curso/${i.id}`));t.asignaciones=a.asignaciones,t.periodos=a.periodos;for(let o of t.asignaciones){let s=new S.l(i,o,t.periodos);t.listados.push(s)}}catch(a){t.generatepdfMsg=`Error al cargar las asignaciones: ${a}`,t.success=!1,console.log("Error al cargar las asignaciones: ",a);break}}})()}onLoadBoletines(){var t=this;return(0,d.Z)(function*(){for(const i of t.data){t.generatepdfMsg=`Cargando Informaci\xf3n de  ${i.grado.nombre} (${i.nombre})...`;try{const a=yield(0,f.z)(t.crudMatriculaService.read("/secretaria/matriculas/notascurso/"+i.id));yield a.data.sort((o,s)=>o.alumno.primer_apellido<s.alumno.primer_apellido?-1:o.alumno.primer_apellido>s.alumno.primer_apellido?1:o.alumno.segundo_apellido<s.alumno.segundo_apellido?-1:o.alumno.segundo_apellido>s.alumno.segundo_apellido?1:o.alumno.primer_nombre<s.alumno.primer_nombre?-1:o.alumno.primer_nombre>s.alumno.primer_nombre?1:o.alumno.segundo_nombre<s.alumno.segundo_nombre?-1:o.alumno.segundo_nombre>s.alumno.segundo_nombre?1:0),yield a.data.forEach(o=>{o.curso_r&&o.curso_r.asignaciones&&o.curso_r.asignaciones.sort((s,_)=>{const A=s.materia.area.nombre.toLowerCase(),T=_.materia.area.nombre.toLowerCase(),w=s.materia.nombre.toLowerCase(),y=_.materia.nombre.toLowerCase();return A<T?-1:A>T?1:w<y?-1:w>y?1:0})}),yield a.data.forEach(o=>{let s=new q.j;s.setBoletin(i,o),t.boletines.push(s)}),yield t.boletines.forEach(o=>{o.setPuesto(t.boletines)})}catch{}}})()}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(g.I),e.Y36(g.I),e.Y36(g.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-cursos"]],decls:7,vars:7,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item","active"],["class","container card",4,"ngIf"],["class","container mt-5",4,"ngIf"],[3,"data","loading","message","success","config","event"],[1,"container","card"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center","w-100"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-danger","dropdown-toggle","rounded-0"],[1,"dropdown-menu","dropdown-menu-center","rounded-0"],[1,"dropdown-header"],[1,"fa-regular","fa-file-pdf","text-danger"],[1,"dropdown-item","cursor",3,"click"],[1,"dropdown-divider"],[3,"generatepdfMsg",4,"ngIf"],[3,"generatepdfMsg"],[1,"container","mt-5"],[1,"row"],["role","alert",1,"alert","alert-warning"]],template:function(i,a){1&i&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),e._uU(3,"Cursos"),e.qZA()()(),e.YNc(4,N,35,1,"div",3),e.YNc(5,J,6,0,"div",4),e.TgZ(6,"app-datatable",5),e.NdJ("event",function(s){return a.onBorrar(s)}),e.qZA()),2&i&&(e.xp6(4),e.Q6J("ngIf",!a.loading&&a.data.length>0),e.xp6(1),e.Q6J("ngIf",!a.loading&&0===a.data.length),e.xp6(1),e.Q6J("data",a.data)("loading",a.loading)("message",a.message)("success",a.success)("config",a.config))},dependencies:[l.O5,U.n,k.o]})}return r})();var Q=c(5664),x=c(6688),Y=c(142);function L(r,n){if(1&r&&(e.TgZ(0,"li",8),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.data.nombre)}}function F(r,n){if(1&r&&(e.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),e._UZ(4,"app-loading",13),e.TgZ(5,"h4",14),e._uU(6),e.qZA()()()()()),2&r){const t=e.oxw();e.xp6(6),e.hij(" Cargando ",t.msg,"... ")}}function D(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onPdf(10))}),e._uU(1,"Listado Asistencia"),e.qZA()}}const Z=function(r){return["/secretaria/cursos/matricular",r]};function E(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",15)(1,"h3",16),e._uU(2),e.qZA(),e.TgZ(3,"p",17),e._uU(4),e.qZA(),e.TgZ(5,"p",18),e._uU(6),e.qZA(),e.TgZ(7,"div",19)(8,"div",20)(9,"button",21),e._uU(10," Acciones "),e.qZA(),e.TgZ(11,"ul",22)(12,"li")(13,"h6",23),e._uU(14,"Alumnos"),e.qZA()(),e.TgZ(15,"li")(16,"a",24),e._uU(17,"Matricular"),e.qZA()()(),e.TgZ(18,"button",25),e._uU(19," Documentos "),e.qZA(),e.TgZ(20,"ul",22)(21,"h6",23),e._UZ(22,"i",26),e._uU(23," PDF "),e.qZA(),e.TgZ(24,"li"),e.YNc(25,D,2,0,"a",27),e.qZA(),e.TgZ(26,"li"),e._UZ(27,"hr",28),e.qZA(),e.TgZ(28,"h6",23),e._UZ(29,"i",29),e._uU(30," Excel "),e.qZA(),e.TgZ(31,"li")(32,"a",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(9))}),e._uU(33,"Listado Alumnos"),e.qZA()(),e.TgZ(34,"li")(35,"a",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onPdf(10))}),e._uU(36,"Listado Asistencia"),e.qZA()()()()()()}if(2&r){const t=e.oxw();e.xp6(2),e.lnq("Sede ",t.data.sede.nombre," / ",t.data.grado.nombre," [",t.data.nombre," ]"),e.xp6(2),e.lnq("Coordinaci\xf3n: ",t.data.coordinador.primer_nombre," ",t.data.coordinador.segundo_nombre," ",t.data.coordinador.primer_apellido,""),e.xp6(2),e.lnq("Direcci\xf3n: ",t.data.director.primer_nombre," ",t.data.director.segundo_nombre," ",t.data.director.primer_apellido,""),e.xp6(10),e.Q6J("routerLink",e.VKq(11,Z,t.id)),e.xp6(9),e.Q6J("ngIf",(null==t.data?null:t.data.id)&&t.matriculados.length>0)}}function P(r,n){if(1&r&&(e.TgZ(0,"li",48)(1,"small"),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.nombre)," ")}}function O(r,n){if(1&r&&(e.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"small",44),e._uU(4," Sin Asignar "),e.qZA(),e.TgZ(5,"div",45)(6,"ul",46),e.YNc(7,P,4,3,"li",47),e.qZA()()()()()),2&r){const t=e.oxw(2);e.xp6(7),e.Q6J("ngForOf",t.disponibles)}}function V(r,n){if(1&r&&(e.TgZ(0,"a",57),e._uU(1),e.qZA()),2&r){const t=n.$implicit;e.ekj("active",0===n.index),e.uIk("id","pill"+t.id)("data-bs-target","#pillContent"+t.id),e.xp6(1),e.hij(" ",t.materia.nombre," ")}}function G(r,n){if(1&r&&(e.TgZ(0,"th")(1,"p",71),e._uU(2),e.ALo(3,"uppercase"),e.qZA(),e.TgZ(4,"p",72)(5,"small"),e._uU(6),e.qZA()()()),2&r){const t=n.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,t.nombre.substring(0,1)),"P "),e.xp6(4),e.hij(" ",t.porcentaje,"% ")}}const C=function(r){return{color:r}};function K(r,n){if(1&r&&(e.TgZ(0,"td",80),e._uU(1),e.qZA()),2&r){const t=n.$implicit,i=e.oxw(8);e.Q6J("ngStyle",e.VKq(2,C,i.getColor(t))),e.xp6(1),e.Oqu(t)}}function H(r,n){if(1&r&&(e.TgZ(0,"tr",73)(1,"td")(2,"div",74)(3,"div",60),e._UZ(4,"img",75),e.qZA(),e.TgZ(5,"div",62)(6,"p",76),e._uU(7),e.qZA(),e.TgZ(8,"p",77),e._uU(9),e.qZA()()()(),e.YNc(10,K,2,4,"td",78),e.TgZ(11,"td",79),e._uU(12),e.ALo(13,"round"),e.qZA()()),2&r){const t=n.$implicit,i=e.oxw(7);e.xp6(4),e.Q6J("src",t.alumno.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",t.alumno.primer_apellido," ",t.alumno.segundo_apellido," "),e.xp6(2),e.AsE(" ",t.alumno.primer_nombre," ",t.alumno.segundo_nombre," "),e.xp6(1),e.Q6J("ngForOf",t.notas),e.xp6(1),e.Q6J("ngStyle",e.VKq(11,C,i.getColor(t.total))),e.xp6(1),e.hij(" ",e.xi3(13,8,t.total,1)," ")}}function j(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",67)(2,"table",68)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Alumno"),e.qZA(),e.YNc(7,G,7,4,"th",65),e.TgZ(8,"th",69),e._uU(9,"Acum."),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,H,14,13,"tr",70),e.qZA()()(),e.BQk()),2&r){const t=e.oxw().$implicit,i=e.oxw(5);e.xp6(7),e.Q6J("ngForOf",i.periodos),e.xp6(4),e.Q6J("ngForOf",t.data.matriz)}}function B(r,n){if(1&r&&(e.ynx(0),e.YNc(1,j,12,2,"ng-container",66),e.BQk()),2&r){const t=n.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.idasignacion==i.id)}}function $(r,n){if(1&r&&(e.TgZ(0,"div",58)(1,"div",59)(2,"div",60),e._UZ(3,"img",61),e.qZA(),e.TgZ(4,"div",62)(5,"h5",63),e._uU(6),e.ALo(7,"uppercase"),e.qZA(),e.TgZ(8,"h6",63),e._uU(9),e.qZA(),e.TgZ(10,"p",64)(11,"small"),e._uU(12),e.qZA()()()(),e.YNc(13,B,2,1,"ng-container",65),e.qZA()),2&r){const t=n.$implicit,i=n.index,a=e.oxw(4);e.ekj("active",0===i)("show",0===i),e.uIk("id","pillContent"+t.id),e.xp6(3),e.Q6J("src",t.docente.avatar_url,e.LSH),e.xp6(3),e.hij(" ",e.lcZ(7,13,t.materia.nombre)," "),e.xp6(3),e.HOy(" ",t.docente.primer_nombre," ",t.docente.segundo_nombre," ",t.docente.primer_apellido," ",t.docente.segundo_apellido," "),e.xp6(3),e.hij(" ",t.docente.email," "),e.xp6(1),e.Q6J("ngForOf",a.notas)}}function z(r,n){if(1&r&&(e.TgZ(0,"div",52)(1,"div",53),e.YNc(2,V,2,5,"a",54),e.qZA(),e.TgZ(3,"div",55),e.YNc(4,$,14,15,"div",56),e.qZA()()),2&r){const t=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",t.asignaciones),e.xp6(2),e.Q6J("ngForOf",t.asignaciones)}}function R(r,n){if(1&r&&(e.TgZ(0,"tr",73)(1,"td")(2,"div",74)(3,"div",60),e._UZ(4,"img",75),e.qZA(),e.TgZ(5,"div",62)(6,"p",76),e._uU(7),e.qZA(),e.TgZ(8,"p",77),e._uU(9),e.qZA(),e.TgZ(10,"p",77)(11,"small"),e._uU(12),e.qZA()()()()()()),2&r){const t=n.$implicit;e.xp6(4),e.Q6J("src",t.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",t.primer_apellido," ",t.segundo_apellido," "),e.xp6(2),e.AsE(" ",t.primer_nombre," ",t.segundo_nombre," "),e.xp6(3),e.hij(" ",t.codigo," ")}}function X(r,n){if(1&r&&(e.TgZ(0,"div",67)(1,"table",68)(2,"thead")(3,"tr")(4,"th"),e._uU(5,"Alumno"),e.qZA()()(),e.TgZ(6,"tbody"),e.YNc(7,R,13,6,"tr",70),e.qZA()()()),2&r){const t=e.oxw(3);e.xp6(7),e.Q6J("ngForOf",t.matriculados)}}function W(r,n){if(1&r&&(e.TgZ(0,"div",49),e.YNc(1,z,5,2,"div",50),e.YNc(2,X,8,1,"div",51),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.asignaciones.length>0),e.xp6(1),e.Q6J("ngIf",0==t.asignaciones.length)}}const ee=function(r,n){return{"col-md-9":r,"col-md-12":n}};function te(r,n){if(1&r&&(e.TgZ(0,"div",31),e.YNc(1,O,8,1,"div",32),e.TgZ(2,"div",33)(3,"div",34)(4,"div",35)(5,"div",36)(6,"div",20)(7,"div",37)(8,"button",38),e._UZ(9,"i",39),e.qZA(),e.TgZ(10,"div",22)(11,"h6",23),e._uU(12,"Gestionar"),e.qZA(),e.TgZ(13,"a",24),e._uU(14,"Matricular"),e.qZA()()()()()(),e.YNc(15,W,3,2,"div",40),e.qZA()()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.loading&&t.disponibles.length>0),e.xp6(1),e.Q6J("ngClass",e.WLB(4,ee,t.disponibles.length>0,0===t.disponibles.length)),e.xp6(11),e.Q6J("routerLink",e.VKq(7,Z,t.id)),e.xp6(2),e.Q6J("ngIf",!t.loading)}}m.vfs=b.I.vfs;let ie=(()=>{class r{constructor(t,i,a,o){this.route=t,this.crudService=i,this.crudAsignacionService=a,this.crudMatriculaService=o,this.success=!0,this.loading=!1,this.generatepdf=!1,this.docDefinition=u.U,this.asignaciones=[],this.disponibles=[],this.matriculados=[],this.periodos=[],this.escalas=[],this.notas=[]}ngOnInit(){var t=this;return(0,d.Z)(function*(){t.loading=!0,t.id=t.route.snapshot.params.id,t.msg="Curso",yield t.crudService.read("/secretaria/cursos/"+t.id).subscribe({next:i=>{t.data=i.data,t.msg="Asignaciones",t.onAsignaciones()},error:i=>{t.message="Error al cargar el curso : "+i,t.success=!1,t.loading=!1}})})()}onAsignaciones(){var t=this;return(0,d.Z)(function*(){yield t.crudAsignacionService.read("/secretaria/asignaciones/curso/"+t.id).subscribe({next:i=>{t.disponibles=i.disponibles,t.asignaciones=i.asignaciones,t.periodos=i.periodos,t.escalas=i.escalas,t.asignaciones.forEach(a=>{let o=new Q.y;o.setData(a.matriculados),t.notas.push({idasignacion:a.id,data:o})}),t.msg="Matriculas",t.onMatriculas()},error:i=>{t.message="Error al cargar el area : "+i,t.success=!1,t.loading=!1}})})()}onMatriculas(){var t=this;return(0,d.Z)(function*(){yield t.crudMatriculaService.read("/secretaria/matriculas/curso/"+t.id).subscribe({next:i=>{t.matriculados=i.data,t.msg="",t.loading=!1},error:i=>{t.message="Error al cargar el area : "+i,t.success=!1,t.loading=!1,t.onMessage()}})})()}onMessage(){setTimeout(()=>{this.message=""},5e3)}ordenarMatriculados(){this.matriculados.sort((t,i)=>{const a=t.primer_apellido+t.segundo_apellido,o=i.primer_apellido+i.segundo_apellido,s=t.primer_nombre+t.segundo_nombre,_=i.primer_nombre+i.segundo_nombre;return a<o?-1:a>o?1:s<_?-1:s>_?1:0})}onPdf(t){switch(t){case 1:this.generatepdf=!0,this.docDefinition=new u.U,this.docDefinition.listado(this.data.matriculados,this.data).then(()=>{m.createPdf(this.docDefinition.def).download("Listado_"+this.data.nombre+".pdf",()=>{this.generatepdf=!1})});break;case 2:this.generatepdf=!0,this.docDefinition=new u.U,this.docDefinition.asignaciones(this.asignaciones,this.matriculados,this.data).then(()=>{m.createPdf(this.docDefinition.def).download("Listado_"+this.data.nombre+".pdf",()=>{this.generatepdf=!1})});break;case 3:this.generatepdf=!0,this.docDefinition=new u.U,this.docDefinition.listadoGeneral(this.asignaciones,this.matriculados,this.data).then(()=>{m.createPdf(this.docDefinition.def).download("Listado_"+this.data.nombre+".pdf",()=>{this.generatepdf=!1})});break;case 10:this.generatepdf=!0,this.docDefinition=new u.U,this.docDefinition.listadoAsistencia(this.matriculados,this.data).then(()=>{m.createPdf(this.docDefinition.def).download("ListadosAsistencia.pdf",()=>{this.generatepdf=!1})})}}getColor(t){if(!this.escalas)return console.warn("escalas no est\xe1 definido"),"black";const i=this.escalas.find(a=>t>=a.minimo&&t<=a.maximo);return i?i.color:"black"}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(p.gz),e.Y36(g.I),e.Y36(g.I),e.Y36(g.I))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-cursos-view"]],decls:9,vars:4,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/cursos"],["class","breadcrumb-item active","aria-current","page",4,"ngIf"],["class","card",4,"ngIf"],["class","alert alert-light",4,"ngIf"],["class","row",4,"ngIf"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","30px"],[1,"ms-2","text-secondary"],[1,"alert","alert-light"],[1,"alert-heading","text-dark","text-end","mb-0"],[1,"alert-heading","text-secondary","text-end","mb-0"],[1,"alert-heading","text-secondary","text-end","mb-0","border-bottom"],[1,"d-flex","justify-content-start","mt-2"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-danger","btn-sm","me-2","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-header"],[1,"dropdown-item",3,"routerLink"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-dark","btn-sm","dropdown-toggle"],[1,"fa-regular","fa-file-pdf","text-danger"],["class","dropdown-item cursor",3,"click",4,"ngIf"],[1,"dropdown-divider"],[1,"fa-regular","fa-file-excel","text-success"],[1,"dropdown-item","cursor",3,"click"],[1,"row"],["class","col-xs-12 col-md-3",4,"ngIf"],[1,"col-xs-12",3,"ngClass"],[1,"card","shadow-sm"],[1,"card-header"],[1,"d-flex","justify-content-end"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-dark","dropdown-toggle"],[1,"fa-solid","fa-cog","fa-sm"],["class","card-body p-0",4,"ngIf"],[1,"col-xs-12","col-md-3"],[1,"card","bg-light","bg-gradient"],[1,"card-body","p-0","pt-2"],[1,"ms-3","fw-bold","text-secondary"],[1,"disponibles","mt-2","mb-2"],[1,"list-group","list-group-flush"],["class","list-group-item bg-transparent py-0",4,"ngFor","ngForOf"],[1,"list-group-item","bg-transparent","py-0"],[1,"card-body","p-0"],["class","d-flex align-items-start",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"d-flex","align-items-start"],["id","v-pills-tab",1,"nav","flex-column","nav-pills","me-3",2,"flex","0 0 auto","width","25%"],["class","nav-link rounded-0","data-bs-toggle","pill",3,"active",4,"ngFor","ngForOf"],["id","tabContent",1,"tab-content",2,"flex","1"],["class","tab-pane fade",3,"active","show",4,"ngFor","ngForOf"],["data-bs-toggle","pill",1,"nav-link","rounded-0"],[1,"tab-pane","fade"],[1,"d-flex","bg-light","mt-1","p-2","mb-2"],[1,"flex-shrink-0"],["alt","","width","64",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"],[1,"mb-0"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],[1,"text-center","small","align-middle","fw-normal"],["class","",4,"ngFor","ngForOf"],[1,"text-center","mb-0","lh-1"],[1,"fw-normal","text-center","mb-0","lh-1"],[1,""],[1,"d-flex"],["alt","","width","48px",1,"rounded-circle","me-2",3,"src"],[1,"h5","my-0","lh-2"],[1,"h6","fw-normal","lh-1","mb-0"],["class","h4 text-center fw-bold align-middle",3,"ngStyle",4,"ngFor","ngForOf"],[1,"h5","text-center","fw-bold","align-middle",3,"ngStyle"],[1,"h4","text-center","fw-bold","align-middle",3,"ngStyle"]],template:function(i,a){1&i&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Cursos"),e.qZA()(),e.YNc(5,L,2,1,"li",4),e.qZA()(),e.YNc(6,F,7,1,"div",5),e.YNc(7,E,37,13,"div",6),e.YNc(8,te,16,9,"div",7)),2&i&&(e.xp6(5),e.Q6J("ngIf",a.data),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[l.mk,l.sg,l.O5,l.PC,p.rH,x.N,l.gd,l.rS,Y.L],styles:[".nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{transition:background-color .3s ease-in-out,color .3s ease-in-out;color:#555;background-color:#f8f9fa;border-radius:.25rem}.nav-pills[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#2f2200;background-color:#d19700;border-left:3px solid #2f2200;cursor:pointer}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{color:#fff;background-color:#2f2200!important;border-left:3px solid #d19700ff}"]})}return r})();var h=c(6223),re=c(1148),ae=c(6299);const oe=function(r){return["/secretaria/cursos/view",r]};function ne(r,n){if(1&r&&(e.TgZ(0,"li",2)(1,"a",9),e._uU(2),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(2,oe,t.id)),e.xp6(1),e.Oqu(t.data.nombre)}}function se(r,n){1&r&&(e.TgZ(0,"li",10),e._uU(1,"Matriculas"),e.qZA())}function ce(r,n){1&r&&(e.TgZ(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),e._UZ(4,"app-loading",15),e.TgZ(5,"h4",16),e._uU(6," Cargando... "),e.qZA()()()()())}const de=function(r){return["/secretaria/cursos/matricular",r]};function le(r,n){if(1&r&&(e.TgZ(0,"div",17)(1,"h3",18),e._uU(2),e.qZA(),e.TgZ(3,"p",19),e._uU(4),e.qZA(),e.TgZ(5,"p",20),e._uU(6),e.qZA(),e.TgZ(7,"div",21)(8,"div",22)(9,"button",23),e._uU(10," Acciones "),e.qZA(),e.TgZ(11,"ul",24)(12,"li")(13,"h6",25),e._uU(14,"Alumnos"),e.qZA()(),e.TgZ(15,"li")(16,"a",26),e._uU(17,"Matricular"),e.qZA()(),e.TgZ(18,"li"),e._UZ(19,"hr",27),e.qZA(),e.TgZ(20,"li")(21,"a",28),e._uU(22,"Separated link"),e.qZA()()(),e.TgZ(23,"button",29),e._uU(24," Documentos "),e.qZA(),e.TgZ(25,"ul",24)(26,"li")(27,"a",28),e._uU(28,"Action"),e.qZA()(),e.TgZ(29,"li")(30,"a",28),e._uU(31,"Another action"),e.qZA()(),e.TgZ(32,"li")(33,"a",28),e._uU(34,"Something else here"),e.qZA()(),e.TgZ(35,"li"),e._UZ(36,"hr",27),e.qZA(),e.TgZ(37,"li")(38,"a",28),e._uU(39,"Separated link"),e.qZA()()()()()()),2&r){const t=e.oxw();e.xp6(2),e.lnq("Sede ",t.data.sede.nombre," / ",t.data.grado.nombre," [",t.data.nombre," ]"),e.xp6(2),e.lnq("Coordinaci\xf3n: ",t.data.coordinador.primer_nombre," ",t.data.coordinador.segundo_nombre," ",t.data.coordinador.primer_apellido,""),e.xp6(2),e.lnq("Direcci\xf3n: ",t.data.director.primer_nombre," ",t.data.director.segundo_nombre," ",t.data.director.primer_apellido,""),e.xp6(10),e.Q6J("routerLink",e.VKq(10,de,t.id))}}function ue(r,n){if(1&r&&(e.TgZ(0,"li",43)(1,"div",44)(2,"div",45),e._UZ(3,"img",46),e.qZA(),e.TgZ(4,"div",47)(5,"h6",48),e._uU(6),e.qZA(),e.TgZ(7,"p",33),e._uU(8),e.qZA()()(),e._UZ(9,"div"),e.qZA()),2&r){const t=n.$implicit;e.xp6(3),e.Q6J("src",t.avatar_url,e.LSH),e.xp6(3),e.AsE(" ",t.primer_apellido," ",t.segundo_apellido," "),e.xp6(2),e.AsE(" ",t.primer_nombre," ",t.segundo_nombre," ")}}function me(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"li")(1,"a",56),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onLoadGrado(o.id))}),e._uU(2),e.qZA()()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t.nombre)}}const ge=function(r){return["/secretaria/cursos/regalumno",r]};function pe(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",44)(2,"div",49)(3,"input",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleViewMatriculado())}),e.qZA(),e.TgZ(4,"label",51),e._uU(5," Matriculados "),e.qZA()(),e.TgZ(6,"a",52),e._uU(7," Crear Alumno "),e.qZA(),e.TgZ(8,"div",53)(9,"button",54),e._uU(10," Carga Anteriores "),e.qZA(),e.TgZ(11,"ul",24),e.YNc(12,me,3,1,"li",55),e.qZA()()()()}if(2&r){const t=e.oxw(2);e.xp6(6),e.Q6J("routerLink",e.VKq(2,ge,t.id)),e.xp6(6),e.Q6J("ngForOf",t.gradosAnteriores)}}function _e(r,n){1&r&&e._UZ(0,"app-loading2")}function fe(r,n){if(1&r&&(e.TgZ(0,"small",61),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.hij("Seleccionados (",t.selectedAlumnos.length,")")}}function he(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"input",68),e.NdJ("change",function(a){e.CHM(t);const o=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.toggleAlumno(o,a))}),e.qZA()}if(2&r){const t=e.oxw(2).index;e.Q6J("id","flexCheckDefault"+t)}}function ve(r,n){1&r&&e._UZ(0,"i",69)}function be(r,n){if(1&r&&(e.TgZ(0,"li",43)(1,"div",63)(2,"div",64),e.YNc(3,he,1,1,"input",65),e.YNc(4,ve,1,0,"i",66),e.TgZ(5,"label",67),e._uU(6),e.qZA()()()()),2&r){const t=e.oxw(),i=t.$implicit,a=t.index;e.xp6(3),e.Q6J("ngIf",!i.matriculado_actualmente),e.xp6(1),e.Q6J("ngIf",i.matriculado_actualmente),e.xp6(1),e.Q6J("for","flexCheckDefault"+a),e.xp6(1),e.xDo(" ",i.curso.nombre," - ",i.alumno_r.primer_apellido," ",i.alumno_r.segundo_apellido," ",i.alumno_r.primer_nombre," ",i.alumno_r.segundo_nombre," ")}}function xe(r,n){if(1&r&&(e.ynx(0),e.YNc(1,be,7,8,"li",62),e.BQk()),2&r){const t=n.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.matriculado_actualmente||i.viewMatriculados)}}function Ze(r,n){if(1&r&&(e.TgZ(0,"small",61),e._uU(1),e.qZA()),2&r){const t=e.oxw(3);e.xp6(1),e.hij("Seleccionados (",t.selectedAlumnos.length,")")}}function Ce(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"ul",34)(1,"li",57)(2,"div",58)(3,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onMatricular())}),e._uU(4,"Matricular"),e.qZA()(),e.YNc(5,fe,2,1,"small",60),e.qZA(),e.YNc(6,xe,2,1,"ng-container",55),e.TgZ(7,"li",57)(8,"div",58)(9,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onMatricular())}),e._uU(10,"Matricular"),e.qZA()(),e.YNc(11,Ze,2,1,"small",60),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("disabled",0==t.selectedAlumnos.length),e.xp6(2),e.Q6J("ngIf",t.selectedAlumnos.length>0),e.xp6(1),e.Q6J("ngForOf",t.alumnosSearch),e.xp6(3),e.Q6J("disabled",0==t.selectedAlumnos.length),e.xp6(2),e.Q6J("ngIf",t.selectedAlumnos.length>0)}}function Ae(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"div",11)(3,"div",32)(4,"h6",33),e._uU(5,"Alumnos Matriculados"),e.qZA()(),e.TgZ(6,"div",12)(7,"ul",34),e.YNc(8,ue,10,5,"li",35),e.qZA()()()(),e.TgZ(9,"div",36)(10,"div",37)(11,"div",12)(12,"app-alumno-buscar",38),e.NdJ("event",function(a){e.CHM(t);const o=e.oxw();return e.KtG(o.onEvent(a))}),e.qZA()()(),e.TgZ(13,"div",11),e.YNc(14,pe,13,4,"div",39),e.TgZ(15,"div",12),e.YNc(16,_e,1,0,"app-loading2",40),e.YNc(17,Ce,12,5,"ul",41),e.qZA()()(),e.TgZ(18,"div",42),e._uU(19," Adsense "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.matriculados),e.xp6(4),e.Q6J("users",t.searchList)("loading",t.loading2),e.xp6(2),e.Q6J("ngIf",!t.loading2),e.xp6(2),e.Q6J("ngIf",t.loading2),e.xp6(1),e.Q6J("ngIf",!t.loading2)}}let Te=(()=>{class r{constructor(t,i,a,o,s){this.route=t,this.router=i,this.crudService=a,this.crudAlumnoService=o,this.fb=s,this.success=!0,this.loading=!1,this.loading2=!1,this.gradosAnteriores=[],this.asignaciones=[],this.disponibles=[],this.matriculados=[],this.viewMatriculados=!1,this.searchList=[],this.alumnosSearch=[],this.selectedAlumnos=[]}ngOnInit(){var t=this;return(0,d.Z)(function*(){t.loading=!0,t.id=t.route.snapshot.params.id,yield t.crudService.read("/secretaria/cursos/"+t.id).subscribe({next:i=>{t.data=i.data,t.matriculados=i.data.matriculas.map(a=>a.alumno),t.cargarAlumnos(),t.ordenarMatriculados(),t.loadCursosAnteriores(),t.loading=!1},error:i=>{t.message="Error al cargar el curso : "+i,t.success=!1,t.loading=!1}})})()}cargarAlumnos(){this.loading2=!0,this.crudAlumnoService.read("/secretaria/matriculas-anteriores/"+this.data.grado.id).subscribe({next:t=>{this.disponibles=t.data,this.alumnosSearch=t.data,this.loading2=!1},error:t=>{this.message="Error al cargar el curso : "+t,this.success=!1,this.loading=!1}})}onEvent(t){var i=this;return(0,d.Z)(function*(){t.term?(i.loading2=!0,yield i.crudService.read("/secretaria/alumnos/search/"+t.term).subscribe({next:a=>{i.searchList=a.data,i.loading2=!1},error:a=>{i.message="Error al cargar el curso : "+a,i.success=!1,i.loading=!1}})):t.user&&i.router.navigate(["/secretaria/alumnos/view/"+t.user])})()}ordenarMatriculados(){this.matriculados.sort((t,i)=>{const a=t.primer_apellido+t.segundo_apellido,o=i.primer_apellido+i.segundo_apellido,s=t.primer_nombre+t.segundo_nombre,_=i.primer_nombre+i.segundo_nombre;return a<o?-1:a>o?1:s<_?-1:s>_?1:0})}loadCursosAnteriores(){var t=this;return(0,d.Z)(function*(){t.loading=!0,yield t.crudService.read("/secretaria/cursos-anteriores").subscribe({next:i=>{t.gradosAnteriores=i.data,t.loading=!1},error:i=>{t.message="Error al cargar el curso : "+i,t.success=!1,t.loading=!1}})})()}toggleAlumno(t,i){i.target.checked?this.selectedAlumnos.push(t.alumno_r):this.selectedAlumnos=this.selectedAlumnos.filter(a=>a.id!==t.alumno_r.id)}toggleViewMatriculado(){this.viewMatriculados=!this.viewMatriculados}onMatricular(){var t=this;return(0,d.Z)(function*(){t.loading2=!0;const i={alumnos:t.selectedAlumnos.map(a=>a.id),curso:t.data.id};yield t.crudAlumnoService.create(i,"/secretaria/matricular").subscribe({next:a=>{t.viewMatriculados=!1,t.matriculados=a.data.matriculas.map(o=>o.alumno),t.message=a.message,t.cargarAlumnos(),t.ordenarMatriculados(),t.selectedAlumnos=[],t.success=!0,t.loading2=!1},error:a=>{t.message="Error al cargar el curso : "+a,t.success=!1,t.loading=!1}})})()}onLoadGrado(t){var i=this;return(0,d.Z)(function*(){i.loading2=!0,yield i.crudService.read("/secretaria/matriculas-anteriores-grado/"+t).subscribe({next:a=>{i.disponibles=a.data,i.alumnosSearch=a.data,i.loading2=!1},error:a=>{i.message="Error al cargar el curso : "+a,i.success=!1,i.loading=!1}})})()}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(p.gz),e.Y36(p.F0),e.Y36(g.I),e.Y36(g.I),e.Y36(h.qu))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-cursos-matricular"]],decls:10,vars:5,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/cursos"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active","aria-current","page",4,"ngIf"],["class","card",4,"ngIf"],["class","alert alert-light",4,"ngIf"],["class","row",4,"ngIf"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","30px"],[1,"ms-2","text-secondary"],[1,"alert","alert-light"],[1,"alert-heading","text-dark","text-end","mb-0"],[1,"alert-heading","text-secondary","text-end","mb-0"],[1,"alert-heading","text-secondary","text-end","mb-0","border-bottom"],[1,"d-flex","justify-content-start","mt-2"],[1,"btn-group"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-danger","btn-sm","me-2","dropdown-toggle"],[1,"dropdown-menu"],[1,"dropdown-header"],[1,"dropdown-item",3,"routerLink"],[1,"dropdown-divider"],["href","#",1,"dropdown-item"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-dark","btn-sm","dropdown-toggle"],[1,"row"],[1,"col-4"],[1,"card-header","bg-transparent"],[1,"mb-0"],[1,"list-group","list-group-flush"],["class","list-group-item px-0 pb-1",4,"ngFor","ngForOf"],[1,"col-5"],[1,"card","mb-2"],[3,"users","loading","event"],["class","card-header bg-transparent",4,"ngIf"],[4,"ngIf"],["class","list-group list-group-flush",4,"ngIf"],[1,"col-3"],[1,"list-group-item","px-0","pb-1"],[1,"d-flex"],[1,"flex-shrink-0"],["alt","","width","40",3,"src"],[1,"flex-grow-1","ms-3"],[1,"my-0"],[1,"flex-grow-1","p-1"],["type","checkbox","id","viewMatriculado",1,"form-check-input","me-3",2,"accent-color","grey",3,"click"],["for","viewMatriculado",1,"form-check-label","text-secondary"],[1,"btn","btn-sm","btn-success","me-1",3,"routerLink"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-secondary","dropdown-toggle"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[1,"list-group-item","px-0","pb-1","border-0"],[1,"d-grid"],[1,"btn","btn-sm","btn-primary",3,"disabled","click"],["class","mb-0 py-1 text-secondary",4,"ngIf"],[1,"mb-0","py-1","text-secondary"],["class","list-group-item px-0 pb-1",4,"ngIf"],[1,"d-flex","align-items-center"],[1,"flex-grow-1","ms-1"],["type","checkbox","class","form-check-input me-2","style","accent-color: grey;",3,"id","change",4,"ngIf"],["class","fa-regular fa-square-check fw-bold text-success ms-1 me-2",4,"ngIf"],[1,"form-check-label",3,"for"],["type","checkbox",1,"form-check-input","me-2",2,"accent-color","grey",3,"id","change"],[1,"fa-regular","fa-square-check","fw-bold","text-success","ms-1","me-2"]],template:function(i,a){1&i&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Cursos"),e.qZA()(),e.YNc(5,ne,3,4,"li",4),e.YNc(6,se,2,0,"li",5),e.qZA()(),e.YNc(7,ce,7,0,"div",6),e.YNc(8,le,40,12,"div",7),e.YNc(9,Ae,20,6,"div",8)),2&i&&(e.xp6(5),e.Q6J("ngIf",a.data),e.xp6(1),e.Q6J("ngIf",a.data),e.xp6(1),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[l.sg,l.O5,p.rH,x.N,re.D,ae.i]})}return r})();var we=c(2451),ye=c(4013);const Se=function(r){return["/secretaria/cursos/view",r]};function qe(r,n){if(1&r&&(e.TgZ(0,"li",2)(1,"a",7),e._uU(2),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(2,Se,t.id)),e.xp6(1),e.Oqu(t.curso.nombre)}}const Ue=function(r){return["/secretaria/cursos/matricular",r]};function ke(r,n){if(1&r&&(e.TgZ(0,"li",2)(1,"a",7),e._uU(2,"Matriculas"),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("routerLink",e.VKq(1,Ue,t.id))}}function Me(r,n){1&r&&(e.TgZ(0,"li",8),e._uU(1,"Nuevo"),e.qZA())}const Ne=[{path:"",component:I},{path:"view/:id",component:ie},{path:"matricular/:id",component:Te},{path:"regalumno/:id",component:(()=>{class r{constructor(t,i,a,o,s){this.route=t,this.crudService=i,this.crudCursoService=a,this.crudTipodocumentoService=o,this.fb=s,this.success=!0,this.loading=!1}ngOnInit(){var t=this;return(0,d.Z)(function*(){t.loading=!0,t.id=t.route.snapshot.params.id,t.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"},{key:"curso",type:"hidden",value:t.id}],actions:{}};const a=(yield(0,f.z)(t.crudTipodocumentoService.read("/secretaria/tipo_documentos"))).filter(s=>"activo"===s.estado).map(s=>({value:s.id.toString(),displayValue:s.nombre})),o=t.config.columns.find(s=>"tipo_documento"===s.key);o&&(o.options=a),yield t.crudCursoService.read("/secretaria/cursos/"+t.id).subscribe({next:s=>{t.data=new we.n,t.curso=s.data,t.loading=!1},error:s=>{t.message="Error al cargar el curso : "+s,t.success=!1,t.loading=!1}})})()}onAgregar(t){t.curso=this.id,this.loading=!0,this.crudService.create(t,"/secretaria/alumnos").subscribe({next:i=>{this.message=i.message,this.success=!0,this.loading=!1},error:i=>{this.message="Error al crear el docente : "+i,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#e=this.\u0275fac=function(i){return new(i||r)(e.Y36(p.gz),e.Y36(g.I),e.Y36(g.I),e.Y36(g.I),e.Y36(h.qu))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-secretaria-cursos-registro-alumno"]],decls:9,vars:7,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/secretaria/cursos"],["class","breadcrumb-item",4,"ngIf"],["class","breadcrumb-item active","aria-current","page",4,"ngIf"],[3,"loading","message","success","config","event"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"]],template:function(i,a){1&i&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Cursos"),e.qZA()(),e.YNc(5,qe,3,4,"li",4),e.YNc(6,ke,3,3,"li",4),e.YNc(7,Me,2,0,"li",5),e.qZA()(),e.TgZ(8,"app-formulario",6),e.NdJ("event",function(s){return a.onAgregar(s)}),e.qZA()),2&i&&(e.xp6(5),e.Q6J("ngIf",a.curso),e.xp6(1),e.Q6J("ngIf",a.curso),e.xp6(1),e.Q6J("ngIf",a.curso),e.xp6(1),e.Q6J("loading",a.loading)("message",a.message)("success",a.success)("config",a.config))},dependencies:[l.O5,p.rH,ye.o]})}return r})()}];let Je=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(Ne),p.Bz]})}return r})();var Ie=c(6208);let Qe=(()=>{class r{static#e=this.\u0275fac=function(i){return new(i||r)};static#t=this.\u0275mod=e.oAB({type:r});static#i=this.\u0275inj=e.cJS({imports:[l.ez,Je,h.UX,Ie.m]})}return r})()}}]);