"use strict";(self.webpackChunkmdng=self.webpackChunkmdng||[]).push([[400],{400:(T,h,l)=>{l.r(h),l.d(h,{RootUsuariosModule:()=>u});var t=l(6814),c=l(4887),e=l(9468),d=l(932),g=l(6688);function v(o,r){if(1&o&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5),e._UZ(3,"img",6),e.qZA(),e.TgZ(4,"div",7)(5,"div",8),e._uU(6),e.qZA(),e.TgZ(7,"div",9),e._uU(8),e.qZA(),e.TgZ(9,"div",10),e._uU(10),e.qZA()()(),e.TgZ(11,"div",11)(12,"button",12),e._uU(13," Editar "),e.qZA(),e.TgZ(14,"button",13),e._uU(15," Eliminar "),e.qZA()()()),2&o){const n=r.$implicit;e.xp6(3),e.Q6J("src",n.avatar_url,e.LSH),e.xp6(3),e.AsE("",n.primer_apellido," ",n.primer_nombre,""),e.xp6(2),e.Oqu(n.nid),e.xp6(2),e.Oqu(n.email)}}let p=(()=>{class o{constructor(){this.users=[]}static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-list"]],inputs:{users:"users"},decls:3,vars:1,consts:[[1,"container","mt-3"],[1,"user-list"],["class","user-item d-flex align-items-center justify-content-between mb-2",4,"ngFor","ngForOf"],[1,"user-item","d-flex","align-items-center","justify-content-between","mb-2"],[1,"d-flex","align-items-center"],[1,"avatar"],["alt","Avatar","width","50","height","50",1,"rounded-circle",3,"src"],[1,"user-info"],[1,"user-name"],[1,"user-document"],[1,"user-email"],[1,"user-actions"],[1,"btn","btn-primary","btn-sm","me-1"],[1,"btn","btn-danger","btn-sm"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,v,16,5,"div",2),e.qZA()()),2&s&&(e.xp6(2),e.Q6J("ngForOf",a.users))},dependencies:[t.sg],styles:[".user-list[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:4px;padding:1rem}.user-item[_ngcontent-%COMP%]{padding:.5rem 0;border-bottom:1px solid #eee}.user-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.user-info[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-weight:700}.user-info[_ngcontent-%COMP%]   .user-document[_ngcontent-%COMP%], .user-info[_ngcontent-%COMP%]   .user-email[_ngcontent-%COMP%]{font-size:.8rem;color:#666}"]})}return o})();function f(o,r){1&o&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"app-loading",9),e.TgZ(3,"h4",10),e._uU(4," Cargando... "),e.qZA()()())}const m=function(o){return{active:o}};function _(o,r){if(1&o){const n=e.EpF();e.TgZ(0,"li",17)(1,"a",18),e.NdJ("click",function(){const C=e.CHM(n).$implicit,y=e.oxw(2);return e.KtG(y.onRole(C.id))}),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()}if(2&o){const n=r.$implicit,s=r.index;e.xp6(1),e.Q6J("ngClass",e.VKq(6,m,0===s)),e.uIk("id",n.name+"-tab")("data-bs-target","#"+n.name),e.xp6(1),e.Oqu(e.lcZ(3,4,n.name))}}const x=function(o){return["/root/usuarios/add/",o]};function b(o,r){if(1&o&&(e.TgZ(0,"div",19)(1,"div",20)(2,"a",21),e._uU(3," Registrar "),e.qZA()(),e._UZ(4,"app-user-list",22),e.qZA()),2&o){const n=r.$implicit,s=r.index,a=e.oxw(2);e.Q6J("ngClass",e.VKq(5,m,0===s)),e.uIk("id",n.name)("tabindex",s),e.xp6(2),e.Q6J("routerLink",e.VKq(7,x,n.id)),e.xp6(2),e.Q6J("users",a.filter)}}function Z(o,r){if(1&o&&(e.TgZ(0,"div",11)(1,"ul",12),e.YNc(2,_,4,8,"li",13),e.qZA(),e.TgZ(3,"div",14)(4,"div",15),e.YNc(5,b,5,9,"div",16),e.qZA()()()),2&o){const n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.roles),e.xp6(3),e.Q6J("ngForOf",n.roles)}}let N=(()=>{class o{constructor(n,s){this.crudRoleService=n,this.crudService=s,this.data=[],this.filter=[],this.roles=[],this.success=!0,this.loading=!1}ngOnInit(){this.loading=!0,this.crudService.read("/root/usuarios").subscribe({next:n=>{this.data=n,this.loadRoles()},error:n=>{this.loading=!1,console.error("Error al obtener los usuarios:",n)}})}loadRoles(){this.crudRoleService.read("/root/roles").subscribe({next:n=>{this.roles=n,this.loading=!1},error:n=>{this.loading=!1,console.error("Error al obtener los roles:",n)}})}onRole(n){this.filter=[],this.filter=this.data.filter(s=>s.roles.some(a=>a.id===n))}static#t=this.\u0275fac=function(s){return new(s||o)(e.Y36(d.I),e.Y36(d.I))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-root-usuarios"]],decls:8,vars:2,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],["aria-current","page",1,"breadcrumb-item","active"],[1,"card"],[1,"card-body"],["class","container mt-3",4,"ngIf"],["class","d-flex align-items-start",4,"ngIf"],[1,"container","mt-3"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[1,"d-flex","align-items-start"],["id","v-pills-tab","role","tablist",1,"nav","flex-column","nav-pills","border-end","pe-2","me-2"],["class","nav-item",4,"ngFor","ngForOf"],["id","v-pills-tabContent",1,"tab-content","w-100"],[1,"tab-content"],["class","tab-pane","role","tabpanel",3,"ngClass",4,"ngFor","ngForOf"],[1,"nav-item"],["data-bs-toggle","pill",1,"nav-link","cursor",3,"ngClass","click"],["role","tabpanel",1,"tab-pane",3,"ngClass"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-primary",3,"routerLink"],[3,"users"]],template:function(s,a){1&s&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2),e._uU(3,"Usuarios"),e.qZA()()(),e.TgZ(4,"div",3)(5,"div",4),e.YNc(6,f,5,0,"div",5),e.YNc(7,Z,6,2,"div",6),e.qZA()()),2&s&&(e.xp6(6),e.Q6J("ngIf",a.loading),e.xp6(1),e.Q6J("ngIf",!a.loading))},dependencies:[t.mk,t.sg,t.O5,c.rH,g.N,p,t.rS]})}return o})();var U=l(5861),q=l(2451),A=l(4036),I=l(4013);const F=[{path:"",component:N},{path:"add/:id",component:(()=>{class o{constructor(n,s,a){this.crudService=n,this.crudTipodocumentoService=s,this.router=a,this.success=!0,this.loading=!1}ngOnInit(){var n=this;return(0,U.Z)(function*(){n.id=n.router.snapshot.params.id,n.config={columns:[{key:"primer_apellido",displayName:"Primer Apellido",required:!0,type:"text"},{key:"segundo_apellido",displayName:"Segundo Apellido",required:!1,type:"text"},{key:"primer_nombre",displayName:"Primer Nombre",required:!0,type:"text"},{key:"segundo_nombre",displayName:"Segundo Nombre",required:!1,type:"text"},{key:"celular",displayName:"Numero Celular",required:!0,type:"text"},{key:"rol",type:"hidden",value:n.id},{key:"email",displayName:"Email",required:!0,type:"email"},{key:"tipo_documento",displayName:"Tipo Documento",required:!0,type:"select",options:[]},{key:"nid",displayName:"Numero Documento",required:!0,type:"text"}],actions:{}};const a=(yield(0,A.z)(n.crudTipodocumentoService.read("/root/tipo_documentos"))).filter(y=>"activo"===y.estado).map(y=>({value:y.id.toString(),displayValue:y.nombre})),C=n.config.columns.find(y=>"tipo_documento"===y.key);C&&(C.options=a)})()}onAgregar(n){n.rol=this.id,this.loading=!0,this.crudService.create(n,"/root/usuarios").subscribe({next:s=>{this.data=new q.n,this.message=s.message,this.success=!0,this.loading=!1},error:s=>{this.message="Error al crear el usuario : "+s,this.success=!1,this.loading=!1}}),setTimeout(()=>{this.message=""},5e3)}static#t=this.\u0275fac=function(s){return new(s||o)(e.Y36(d.I),e.Y36(d.I),e.Y36(c.gz))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-root-usuarios-add"]],decls:8,vars:4,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/root/usuarios"],["aria-current","page",1,"breadcrumb-item","active"],[3,"loading","message","success","config","event"]],template:function(s,a){1&s&&(e.TgZ(0,"nav",0)(1,"ol",1)(2,"li",2)(3,"a",3),e._uU(4,"Usuarios"),e.qZA()(),e.TgZ(5,"li",4),e._uU(6,"Nuevo"),e.qZA()()(),e.TgZ(7,"app-formulario",5),e.NdJ("event",function(y){return a.onAgregar(y)}),e.qZA()),2&s&&(e.xp6(7),e.Q6J("loading",a.loading)("message",a.message)("success",a.success)("config",a.config))},dependencies:[c.rH,I.o]})}return o})()},{path:"edit/:id",component:(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-root-usuarios-edit"]],decls:2,vars:0,template:function(s,a){1&s&&(e.TgZ(0,"p"),e._uU(1,"root-usuarios-edit works!"),e.qZA())}})}return o})()}];let J=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[c.Bz.forChild(F),c.Bz]})}return o})();var i=l(6208);let u=(()=>{class o{static#t=this.\u0275fac=function(s){return new(s||o)};static#e=this.\u0275mod=e.oAB({type:o});static#o=this.\u0275inj=e.cJS({imports:[t.ez,J,i.m]})}return o})()},4013:(T,h,l)=>{l.d(h,{o:()=>J});var t=l(9468),c=l(6223),e=l(6814),d=l(6688);const g=function(i,u){return{"alert-success":i,"alert-danger":u}};function v(i,u){if(1&i&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&i){const o=t.oxw();t.Q6J("ngClass",t.WLB(2,g,o.success,!o.success)),t.xp6(1),t.hij(" ",o.message,"\n")}}function p(i,u){if(1&i&&(t.TgZ(0,"div",5),t._UZ(1,"app-loading",6),t.TgZ(2,"h4",7),t._uU(3),t.qZA()()),2&i){const o=t.oxw();t.xp6(3),t.hij(" Cargando ",o.msg,"... ")}}function f(i,u){1&i&&(t.TgZ(0,"span"),t._uU(1,"*"),t.qZA())}function m(i,u){if(1&i&&(t.TgZ(0,"label",21),t.YNc(1,f,2,0,"span",22),t._uU(2),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",o.required),t.xp6(1),t.hij(" ",o.displayName," ")}}function _(i,u){if(1&i&&t._UZ(0,"input",23),2&i){const o=t.oxw().$implicit;let r;t.Q6J("name",o.key)("value",o.value)("required",null!==(r=o.required)&&void 0!==r&&r)}}function x(i,u){if(1&i&&t._UZ(0,"input",24),2&i){const o=t.oxw().$implicit;let r;t.s9C("type",o.type),t.Q6J("formControlName",o.key)("required",null!==(r=o.required)&&void 0!==r&&r)}}function b(i,u){if(1&i&&t._UZ(0,"input",25),2&i){const o=t.oxw().$implicit;let r;t.Q6J("formControlName",o.key)("required",null!==(r=o.required)&&void 0!==r&&r)}}function Z(i,u){if(1&i&&t._UZ(0,"textarea",26),2&i){const o=t.oxw().$implicit;let r;t.Q6J("formControlName",o.key)("required",null!==(r=o.required)&&void 0!==r&&r)}}function N(i,u){if(1&i&&t._UZ(0,"input",27),2&i){const o=t.oxw().$implicit;let r;t.Q6J("formControlName",o.key)("required",null!==(r=o.required)&&void 0!==r&&r)}}function U(i,u){if(1&i&&(t.TgZ(0,"option",30),t._uU(1),t.qZA()),2&i){const o=u.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(o.displayValue)}}function q(i,u){if(1&i){const o=t.EpF();t.TgZ(0,"select",28),t.NdJ("change",function(n){t.CHM(o);const s=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.onSelectChange(n,s.key))}),t.YNc(1,U,2,2,"option",29),t.qZA()}if(2&i){const o=t.oxw().$implicit;t.Q6J("formControlName",o.key),t.xp6(1),t.Q6J("ngForOf",o.options)}}function A(i,u){if(1&i&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&i){const o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.displayName," es requerido. ")}}function I(i,u){if(1&i&&(t.TgZ(0,"div",12),t.YNc(1,m,3,2,"label",13),t.YNc(2,_,1,3,"input",14),t.YNc(3,x,1,3,"input",15),t.YNc(4,b,1,2,"input",16),t.YNc(5,Z,1,2,"textarea",17),t.YNc(6,N,1,2,"input",18),t.YNc(7,q,2,2,"select",19),t.YNc(8,A,2,1,"div",20),t.qZA()),2&i){const o=u.$implicit,r=t.oxw(2);let n;t.xp6(1),t.Q6J("ngIf",o.displayName),t.xp6(1),t.Q6J("ngIf","hidden"===o.type),t.xp6(1),t.Q6J("ngIf","text"===o.type||"email"===o.type),t.xp6(1),t.Q6J("ngIf","number"===o.type),t.xp6(1),t.Q6J("ngIf","textarea"===o.type),t.xp6(1),t.Q6J("ngIf","date"===o.type),t.xp6(1),t.Q6J("ngIf","select"===o.type),t.xp6(1),t.Q6J("ngIf",(null==(n=r.form.get(o.key))?null:n.invalid)&&(null==(n=r.form.get(o.key))?null:n.touched))}}function O(i,u){if(1&i&&(t.TgZ(0,"button",32),t._uU(1,"Actualizar"),t.qZA()),2&i){const o=t.oxw(2);t.Q6J("disabled",o.form.invalid)}}function Q(i,u){if(1&i&&(t.TgZ(0,"button",33),t._uU(1,"Procesar"),t.qZA()),2&i){const o=t.oxw(2);t.Q6J("disabled",o.form.invalid)}}function F(i,u){if(1&i){const o=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.onSubmit())}),t.YNc(1,I,9,8,"div",9),t.YNc(2,O,2,1,"button",10),t.YNc(3,Q,2,1,"button",11),t.qZA()}if(2&i){const o=t.oxw();t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("ngForOf",o.config.columns),t.xp6(1),t.Q6J("ngIf",o.entityData),t.xp6(1),t.Q6J("ngIf",!o.entityData)}}let J=(()=>{class i{constructor(o){this.fb=o,this.event=new t.vpe,this.success=!0,this.loading=!1}ngOnInit(){this.form=this.createGroup()}ngOnChanges(o){o.entityData&&o.entityData.previousValue!==o.entityData.currentValue&&(this.form=this.createGroup())}createGroup(){const o=this.fb.group({});return this.config&&this.config.columns&&this.config.columns.forEach(r=>{const n=this.entityData?this.entityData[r.key]:"";let s=r.required?[c.kI.required]:[];"email"===r.type&&s.push(c.kI.email);let a=this.fb.control(n,s);"date"===r.type&&a.setValue(n?new Date(n).toISOString().substring(0,10):""),o.addControl(r.key,a)}),o}onSubmit(){this.form.valid&&this.event.emit(this.form.value)}onSelectChange(o,r){const s=o.target.value;s&&this.config.columns.find(a=>a.key===r)?.changevalue&&this.event.emit({data:s})}static#t=this.\u0275fac=function(r){return new(r||i)(t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-formulario"]],inputs:{config:"config",entityData:"entityData",message:"message",msg:"msg",success:"success",loading:"loading"},outputs:{event:"event"},features:[t.TTD],decls:4,vars:3,consts:[["class","alert","role","alert",3,"ngClass",4,"ngIf"],[1,"container","p-4"],["class","d-flex  justify-content-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["role","alert",1,"alert",3,"ngClass"],[1,"d-flex","justify-content-center"],["size","20px"],[1,"ms-2","text-secondary"],[3,"formGroup","ngSubmit"],["class","form-group mb-2",4,"ngFor","ngForOf"],["type","submit","class","btn btn-success mt-2",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-primary mt-2",3,"disabled",4,"ngIf"],[1,"form-group","mb-2"],["class","text-secondary",4,"ngIf"],["type","hidden",3,"name","value","required",4,"ngIf"],["class","form-control",3,"type","formControlName","required",4,"ngIf"],["type","number","class","form-control","step","any",3,"formControlName","required",4,"ngIf"],["class","form-control","rows","3",3,"formControlName","required",4,"ngIf"],["type","date","class","form-control",3,"formControlName","required",4,"ngIf"],["class","form-select",3,"formControlName","change",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-secondary"],[4,"ngIf"],["type","hidden",3,"name","value","required"],[1,"form-control",3,"type","formControlName","required"],["type","number","step","any",1,"form-control",3,"formControlName","required"],["rows","3",1,"form-control",3,"formControlName","required"],["type","date",1,"form-control",3,"formControlName","required"],[1,"form-select",3,"formControlName","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-danger"],["type","submit",1,"btn","btn-success","mt-2",3,"disabled"],["type","submit",1,"btn","btn-primary","mt-2",3,"disabled"]],template:function(r,n){1&r&&(t.YNc(0,v,2,5,"div",0),t.TgZ(1,"div",1),t.YNc(2,p,4,1,"div",2),t.YNc(3,F,4,4,"form",3),t.qZA()),2&r&&(t.Q6J("ngIf",n.message),t.xp6(2),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.form&&!n.loading))},dependencies:[e.mk,e.sg,e.O5,c._Y,c.YN,c.Kr,c.Fj,c.wV,c.EJ,c.JJ,c.JL,c.Q7,c.sg,c.u,d.N],styles:[".container[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:.5rem;box-shadow:0 .5rem 1rem #0000001a}.alert[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1050;border-radius:4px;animation:_ngcontent-%COMP%_fadeAlert .5s}@keyframes _ngcontent-%COMP%_fadeAlert{0%{opacity:0;transform:translate(100%)}to{opacity:1;transform:translate(0)}}"]})}return i})()},4036:(T,h,l)=>{l.d(h,{z:()=>e});var t=l(6973),c=l(305);function e(d,g){const v="object"==typeof g;return new Promise((p,f)=>{const m=new c.Hp({next:_=>{p(_),m.unsubscribe()},error:f,complete:()=>{v?p(g.defaultValue):f(new t.K)}});d.subscribe(m)})}},5861:(T,h,l)=>{function t(e,d,g,v,p,f,m){try{var _=e[f](m),x=_.value}catch(b){return void g(b)}_.done?d(x):Promise.resolve(x).then(v,p)}function c(e){return function(){var d=this,g=arguments;return new Promise(function(v,p){var f=e.apply(d,g);function m(x){t(f,v,p,m,_,"next",x)}function _(x){t(f,v,p,m,_,"throw",x)}m(void 0)})}}l.d(h,{Z:()=>c})}}]);